{"remainingRequest":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\src\\views\\LittleWorldManager.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\src\\views\\LittleWorldManager.vue","mtime":1735176537385},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\babel.config.js","mtime":1735045997675},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735088236947},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKbGV0IHVybCA9ICIvbW92aWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1vdmllIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGVudGl0eToge30sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzZWFyY2g6ICIiLAogICAgICBwYWdlTnVtOiAxLAogICAgICBwYWdlU2l6ZTogMTAsCiAgICAgIHRvdGFsOiAwLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBkZWJvdW5jZVRpbWVyOiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZCgpOwogIH0sCiAgbWV0aG9kczogewogICAgc2VhcmNoUXVlcnkoKSB7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmRlYm91bmNlVGltZXIpOwogICAgICB0aGlzLmRlYm91bmNlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgfSwgMzAwKTsgLy8g6Ziy5oqW77yMMzAwbXPlkI7miafooYzmn6Xor6IKICAgIH0sCiAgICBsb2FkKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICByZXF1ZXN0LmdldCh1cmwgKyAiL3BhZ2UiLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwYWdlTnVtOiB0aGlzLnBhZ2VOdW0sCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZSwKICAgICAgICAgIHNlYXJjaDogdGhpcy5zZWFyY2gKICAgICAgICB9CiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHM7CiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsOwogICAgICB9KTsKICAgIH0sCiAgICBhZGQoKSB7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuZW50aXR5ID0ge307CiAgICB9LAogICAgc2F2ZSgpIHsKICAgICAgY29uc3QgbWV0aG9kID0gdGhpcy5lbnRpdHkuaWQgPyAicHV0IiA6ICJwb3N0IjsKICAgICAgcmVxdWVzdFttZXRob2RdKHVybCwgdGhpcy5lbnRpdHkpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICIwIikgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmk43kvZzmiJDlip/vvIEiKTsKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyB8fCAi5pON5L2c5aSx6LSl77yBIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVFZGl0KHJvdykgewogICAgICB0aGlzLmVudGl0eSA9IHsKICAgICAgICAuLi5yb3cKICAgICAgfTsKICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGUoaWQpIHsKICAgICAgcmVxdWVzdC5kZWxldGUoYCR7dXJsfS8ke2lkfWApLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICIwIikgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTmiJDlip/vvIEiKTsKICAgICAgICAgIHRoaXMubG9hZCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tc2cgfHwgIuWIoOmZpOWksei0pe+8gSIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlVXBsb2FkU3VjY2Vzcyh0eXBlLCByZXMpIHsKICAgICAgdGhpcy5lbnRpdHlbdHlwZV0gPSByZXMuZGF0YTsKICAgIH0sCiAgICBkb3dubG9hZCh1cmwpIHsKICAgICAgd2luZG93Lm9wZW4odXJsKTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHBhZ2VTaXplKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7CiAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VOdW07CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKICAgIGJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIGNvbnN0IGlzSW1hZ2UgPSBmaWxlLnR5cGUuc3RhcnRzV2l0aCgiaW1hZ2UvIikgfHwgZmlsZS50eXBlLnN0YXJ0c1dpdGgoInZpZGVvLyIpOwogICAgICBjb25zdCBpc0x0NU0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDU7CiAgICAgIGlmICghaXNJbWFnZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWPquiDveS4iuS8oOWbvueJh+aIluinhumikeaWh+S7tu+8gSIpOwogICAgICB9CiAgICAgIGlmICghaXNMdDVNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH5Lu25aSn5bCP5LiN6IO96LaF6L+HIDVNQu+8gSIpOwogICAgICB9CiAgICAgIHJldHVybiBpc0ltYWdlICYmIGlzTHQ1TTsKICAgIH0KICB9Cn07"},{"version":3,"names":["request","url","name","data","loading","entity","dialogVisible","search","pageNum","pageSize","total","tableData","debounceTimer","created","load","methods","searchQuery","clearTimeout","setTimeout","get","params","then","res","records","add","save","method","id","code","$message","success","error","msg","handleEdit","row","handleDelete","delete","handleUploadSuccess","type","download","window","open","handleSizeChange","handleCurrentChange","beforeUpload","file","isImage","startsWith","isLt5M","size"],"sources":["C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\src\\views\\LittleWorldManager.vue"],"sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n    <!-- 功能区域 -->\n    <div style=\"margin: 10px 0\">\n      <el-button type=\"primary\" @click=\"add\">新增</el-button>\n    </div>\n\n    <!-- 搜索区域 -->\n    <div style=\"margin: 10px 0\">\n      <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%\" clearable></el-input>\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"searchQuery\">查询</el-button>\n    </div>\n\n    <!-- 数据表格 -->\n    <el-table\n      v-loading=\"loading\"\n      :data=\"tableData\"\n      border\n      stripe\n      style=\"width: 100%\"\n    >\n      <el-table-column prop=\"name\" label=\"名称\" width=\"200\"></el-table-column>\n      <el-table-column label=\"图片\" width=\"150\">\n        <template #default=\"scope\">\n          <el-image\n            style=\"width: 100px; height: 100px\"\n            :src=\"scope.row.img\"\n            :preview-src-list=\"[scope.row.img]\"\n          ></el-image>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"下载视频\" width=\"150\">\n        <template #default=\"scope\">\n          <el-button\n            v-if=\"scope.row.url\"\n            type=\"primary\"\n            @click=\"download(scope.row.url)\"\n          >\n            下载\n          </el-button>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"200\">\n        <template #default=\"scope\">\n          <el-button size=\"mini\" @click=\"handleEdit(scope.row)\">编辑</el-button>\n          <el-popconfirm title=\"确定删除吗？\" @confirm=\"handleDelete(scope.row.id)\">\n            <template #reference>\n              <el-button size=\"mini\" type=\"danger\">删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[5, 10, 20]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      ></el-pagination>\n    </div>\n\n    <!-- 弹窗 -->\n    <el-dialog :title=\"entity.id ? '编辑信息' : '新增信息'\" v-model=\"dialogVisible\" width=\"30%\">\n      <el-form :model=\"entity\" label-width=\"120px\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"entity.name\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"图片\">\n          <el-upload\n            action=\"http://localhost:8080/files/upload\"\n            :on-success=\"(res) => handleUploadSuccess('img', res)\"\n            :before-upload=\"beforeUpload\"\n            list-type=\"picture-card\"\n            :show-file-list=\"false\"\n          >\n            <img v-if=\"entity.img\" :src=\"entity.img\" style=\"width: 100px\" />\n            <el-button v-else size=\"small\" type=\"primary\">上传图片</el-button>\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"视频\">\n          <el-upload\n            action=\"http://localhost:8080/files/upload\"\n            :on-success=\"(res) => handleUploadSuccess('url', res)\"\n            :before-upload=\"beforeUpload\"\n          >\n            <el-button size=\"small\" type=\"primary\">上传视频</el-button>\n          </el-upload>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"save\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\nlet url = \"/movie\";\n\nexport default {\n  name: \"Movie\",\n  data() {\n    return {\n      loading: false,\n      entity: {},\n      dialogVisible: false,\n      search: \"\",\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      tableData: [],\n      debounceTimer: null,\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    searchQuery() {\n      clearTimeout(this.debounceTimer);\n      this.debounceTimer = setTimeout(() => {\n        this.load();\n      }, 300); // 防抖，300ms后执行查询\n    },\n    load() {\n      this.loading = true;\n      request\n        .get(url + \"/page\", {\n          params: {\n            pageNum: this.pageNum,\n            pageSize: this.pageSize,\n            search: this.search,\n          },\n        })\n        .then((res) => {\n          this.loading = false;\n          this.tableData = res.data.records;\n          this.total = res.data.total;\n        });\n    },\n    add() {\n      this.dialogVisible = true;\n      this.entity = {};\n    },\n    save() {\n      const method = this.entity.id ? \"put\" : \"post\";\n      request[method](url, this.entity).then((res) => {\n        if (res.code === \"0\") {\n          this.$message.success(\"操作成功！\");\n          this.dialogVisible = false;\n          this.load();\n        } else {\n          this.$message.error(res.msg || \"操作失败！\");\n        }\n      });\n    },\n    handleEdit(row) {\n      this.entity = { ...row };\n      this.dialogVisible = true;\n    },\n    handleDelete(id) {\n      request.delete(`${url}/${id}`).then((res) => {\n        if (res.code === \"0\") {\n          this.$message.success(\"删除成功！\");\n          this.load();\n        } else {\n          this.$message.error(res.msg || \"删除失败！\");\n        }\n      });\n    },\n    handleUploadSuccess(type, res) {\n      this.entity[type] = res.data;\n    },\n    download(url) {\n      window.open(url);\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n    beforeUpload(file) {\n      const isImage = file.type.startsWith(\"image/\") || file.type.startsWith(\"video/\");\n      const isLt5M = file.size / 1024 / 1024 < 5;\n      if (!isImage) {\n        this.$message.error(\"只能上传图片或视频文件！\");\n      }\n      if (!isLt5M) {\n        this.$message.error(\"文件大小不能超过 5MB！\");\n      }\n      return isImage && isLt5M;\n    },\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]}]}