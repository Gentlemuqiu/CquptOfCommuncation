{"remainingRequest":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\User.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\User.vue","mtime":1735216817061},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\babel.config.js","mtime":1735045997675},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735088236947},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lml0ZXJhdG9yLmZpbHRlci5qcyI7CmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CmNvbnN0IHVybCA9ICIvdXNlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVXNlciIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBlbnRpdHk6IHt9LAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgc2VhcmNoOiAiIiwKICAgICAgcGFnZU51bTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMCwKICAgICAgdGFibGVEYXRhOiBbXQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNob3dNZXNzYWdlKHR5cGUsIG1lc3NhZ2UpIHsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgdHlwZSwKICAgICAgICBtZXNzYWdlCiAgICAgIH0pOwogICAgfSwKICAgIGxvYWQoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHJlcXVlc3QuZ2V0KGAke3VybH0vcGFnZWAsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VOdW06IHRoaXMucGFnZU51bSwKICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgc2VhcmNoOiB0aGlzLnNlYXJjaAogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIC8vIOi/h+a7pOaOieeuoeeQhuWRmAogICAgICAgIHRoaXMudGFibGVEYXRhID0gcmVzLmRhdGEucmVjb3Jkcy5maWx0ZXIoaXRlbSA9PiBpdGVtLnJvbGUgIT09IDEpOwogICAgICAgIHRoaXMudG90YWwgPSB0aGlzLnRhYmxlRGF0YS5sZW5ndGg7IC8vIOabtOaWsOaAu+adoeaVsAogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgiZXJyb3IiLCAi5Yqg6L295aSx6LSl77yM6K+356iN5ZCO6YeN6K+VIik7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMuZW50aXR5LmlkID8gInB1dCIgOiAicG9zdCI7CiAgICAgIHJlcXVlc3RbbWV0aG9kXSh1cmwsIHRoaXMuZW50aXR5KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAiMCIpIHsKICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoInN1Y2Nlc3MiLCB0aGlzLmVudGl0eS5pZCA/ICLmm7TmlrDmiJDlip8iIDogIuaWsOWinuaIkOWKnyIpOwogICAgICAgICAgdGhpcy5sb2FkKCk7CiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgiZXJyb3IiLCByZXMubXNnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCJlcnJvciIsICLmk43kvZzlpLHotKXvvIzor7fnqI3lkI7ph43or5UiKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlKGlkKSB7CiAgICAgIHJlcXVlc3QuZGVsZXRlKGAke3VybH0vJHtpZH1gKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAiMCIpIHsKICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoInN1Y2Nlc3MiLCAi5Yig6Zmk5oiQ5YqfIik7CiAgICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgiZXJyb3IiLCByZXMubXNnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCJlcnJvciIsICLliKDpmaTlpLHotKXvvIzor7fnqI3lkI7ph43or5UiKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlKHJvdywgZmllbGQpIHsKICAgICAgcmVxdWVzdC5wdXQodXJsLCByb3cpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICIwIikgewogICAgICAgICAgdGhpcy5zaG93TWVzc2FnZSgic3VjY2VzcyIsIGAke2ZpZWxkID09PSAiZm9yYmlkQ29tbWVudCIgPyAi6K+E6K665p2D6ZmQIiA6ICLnmbvlvZXmnYPpmZAifeS/ruaUueaIkOWKn2ApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNob3dNZXNzYWdlKCJlcnJvciIsIHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoImVycm9yIiwgIuadg+mZkOS/ruaUueWksei0pe+8jOivt+eojeWQjumHjeivlSIpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHBhZ2VTaXplKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7CiAgICAgIHRoaXMucGFnZU51bSA9IHBhZ2VOdW07CiAgICAgIHRoaXMubG9hZCgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["request","url","name","data","loading","entity","dialogVisible","search","pageNum","pageSize","total","tableData","created","load","methods","showMessage","type","message","$message","get","params","then","res","records","filter","item","role","length","catch","save","method","id","code","msg","handleDelete","delete","change","row","field","put","handleSizeChange","handleCurrentChange"],"sources":["C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\User.vue"],"sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n\n    <!-- 搜索区域 -->\n    <div style=\"margin: 10px 0\">\n      <el-input\n        v-model=\"search\"\n        placeholder=\"请输入关键字\"\n        style=\"width: 20%\"\n        clearable\n      ></el-input>\n      <el-button\n        type=\"primary\"\n        style=\"margin-left: 5px\"\n        @click=\"load\"\n      >查询</el-button>\n    </div>\n\n    <!-- 表格显示 -->\n    <el-table\n      v-loading=\"loading\"\n      :data=\"tableData\"\n      border\n      stripe\n      style=\"width: 100%; border-radius: 8px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\"\n    >\n      <el-table-column prop=\"id\" label=\"ID\" sortable></el-table-column>\n      <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n      <el-table-column prop=\"nickName\" label=\"昵称\"></el-table-column>\n      <el-table-column prop=\"phone\" label=\"手机号\"></el-table-column>\n      <el-table-column prop=\"age\" label=\"年龄\"></el-table-column>\n      <el-table-column prop=\"sex\" label=\"性别\"></el-table-column>\n      <el-table-column prop=\"address\" label=\"地址\"></el-table-column>\n      <el-table-column label=\"禁止评论\">\n        <template #default=\"scope\">\n          <el-switch\n            @change=\"change(scope.row, 'forbidComment')\"\n            v-model=\"scope.row.forbidComment\"\n            active-color=\"#f00\"\n            inactive-color=\"#ddd\"\n          >\n          </el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"禁止登录\">\n        <template #default=\"scope\">\n          <el-switch\n            @change=\"change(scope.row, 'forbidLogin')\"\n            v-model=\"scope.row.forbidLogin\"\n            active-color=\"#f00\"\n            inactive-color=\"#ddd\"\n          >\n          </el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\">\n        <template #default=\"scope\">\n          <el-popconfirm\n            title=\"确定删除吗？\"\n            @confirm=\"handleDelete(scope.row.id)\"\n          >\n            <template #reference>\n              <el-button size=\"mini\" type=\"danger\">删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[5, 10, 20]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      >\n      </el-pagination>\n    </div>\n\n    <!-- 弹窗表单 -->\n    <el-dialog title=\"信息\" v-model=\"dialogVisible\" width=\"40%\">\n      <el-form :model=\"entity\" label-width=\"120px\">\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"entity.username\" style=\"width: 80%\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"昵称\">\n          <el-input v-model=\"entity.nickName\" style=\"width: 80%\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号\">\n          <el-input v-model=\"entity.phone\" type=\"number\" style=\"width: 80%\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"年龄\">\n          <el-input v-model=\"entity.age\" type=\"number\" style=\"width: 80%\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-radio v-model=\"entity.sex\" label=\"男\">男</el-radio>\n          <el-radio v-model=\"entity.sex\" label=\"女\">女</el-radio>\n          <el-radio v-model=\"entity.sex\" label=\"未知\">未知</el-radio>\n        </el-form-item>\n        <el-form-item label=\"地址\">\n          <el-input\n            type=\"textarea\"\n            v-model=\"entity.address\"\n            style=\"width: 80%\"\n            clearable\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"save\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nconst url = \"/user\";\n\nexport default {\n  name: \"User\",\n  data() {\n    return {\n      loading: false,\n      entity: {},\n      dialogVisible: false,\n      search: \"\",\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      tableData: [],\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    showMessage(type, message) {\n      this.$message({ type, message });\n    },\n    load() {\n      this.loading = true;\n      request\n        .get(`${url}/page`, {\n          params: {\n            pageNum: this.pageNum,\n            pageSize: this.pageSize,\n            search: this.search,\n          },\n        })\n        .then((res) => {\n          this.loading = false;\n          // 过滤掉管理员\n          this.tableData = res.data.records.filter(item => item.role !== 1); \n          this.total = this.tableData.length; // 更新总条数\n        })\n        .catch(() => {\n          this.loading = false;\n          this.showMessage(\"error\", \"加载失败，请稍后重试\");\n        });\n    },\n    save() {\n      const method = this.entity.id ? \"put\" : \"post\";\n      request[method](url, this.entity)\n        .then((res) => {\n          if (res.code === \"0\") {\n            this.showMessage(\"success\", this.entity.id ? \"更新成功\" : \"新增成功\");\n            this.load();\n            this.dialogVisible = false;\n          } else {\n            this.showMessage(\"error\", res.msg);\n          }\n        })\n        .catch(() => {\n          this.showMessage(\"error\", \"操作失败，请稍后重试\");\n        });\n    },\n    handleDelete(id) {\n      request\n        .delete(`${url}/${id}`)\n        .then((res) => {\n          if (res.code === \"0\") {\n            this.showMessage(\"success\", \"删除成功\");\n            this.load();\n          } else {\n            this.showMessage(\"error\", res.msg);\n          }\n        })\n        .catch(() => {\n          this.showMessage(\"error\", \"删除失败，请稍后重试\");\n        });\n    },\n    change(row, field) {\n      request\n        .put(url, row)\n        .then((res) => {\n          if (res.code === \"0\") {\n            this.showMessage(\"success\", `${field === \"forbidComment\" ? \"评论权限\" : \"登录权限\"}修改成功`);\n          } else {\n            this.showMessage(\"error\", res.msg);\n          }\n        })\n        .catch(() => {\n          this.showMessage(\"error\", \"权限修改失败，请稍后重试\");\n        });\n    },\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n  },\n};\n</script>\n"],"mappings":"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","ignoreList":[]}]}