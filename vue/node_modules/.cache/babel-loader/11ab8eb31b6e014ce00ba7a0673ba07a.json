{"remainingRequest":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\jubao.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\jubao.vue","mtime":1735177608575},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\babel.config.js","mtime":1735045997675},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735088236947},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJKdWJhbyIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDooajmoLzliqDovb3nirbmgIEKICAgICAgcGFnZU51bTogMSwKICAgICAgLy8g5b2T5YmN6aG156CBCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgLy8g5q+P6aG15p2h5pWwCiAgICAgIHRvdGFsOiAwLAogICAgICAvLyDmlbDmja7mgLvmnaHmlbAKICAgICAgdGFibGVEYXRhOiBbXSAvLyDooajmoLzmlbDmja4KICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkKCk7IC8vIOmhtemdouWKoOi9veaXtuiOt+WPluaVsOaNrgogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5pWw5o2uCiAgICBsb2FkKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICByZXF1ZXN0LmdldCgiL2p1YmFvL3BhZ2UiLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwYWdlTnVtOiB0aGlzLnBhZ2VOdW0sCiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdlU2l6ZQogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIGlmIChyZXMuY29kZSA9PT0gIjAiKSB7CiAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLnJlY29yZHM7CiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzLmRhdGEudG90YWw7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyB8fCAi5pWw5o2u5Yqg6L295aSx6LSlIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+35rGC5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VIik7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWIoOmZpOaKleivieWSjOivhOiuugogICAgYXN5bmMgaGFuZGxlRGVsZXRlKHJvdykgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIC8vIOWIoOmZpOivhOiuugogICAgICAgIGF3YWl0IHJlcXVlc3QuZGVsZXRlKGAvbWVzc2FnZS8ke3Jvdy5jb21tZW50SWR9YCk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliKDpmaTor4TorrrmiJDlip8iKTsKCiAgICAgICAgLy8g5Yig6Zmk5oqV6K+JCiAgICAgICAgYXdhaXQgcmVxdWVzdC5kZWxldGUoYC9qdWJhby8ke3Jvdy5pZH1gKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaKleivieiusOW9leaIkOWKnyIpOwoKICAgICAgICAvLyDliLfmlrDooajmoLwKICAgICAgICB0aGlzLmxvYWQoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLliKDpmaTlpLHotKXvvIzor7fnqI3lkI7ph43or5UiKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIOWIhumhteS6i+S7tgogICAgaGFuZGxlU2l6ZUNoYW5nZShuZXdQYWdlU2l6ZSkgewogICAgICB0aGlzLnBhZ2VTaXplID0gbmV3UGFnZVNpemU7CiAgICAgIHRoaXMuZGVib3VuY2VMb2FkKCk7IC8vIOmYsuaKluWKoOi9vQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UobmV3UGFnZU51bSkgewogICAgICB0aGlzLnBhZ2VOdW0gPSBuZXdQYWdlTnVtOwogICAgICB0aGlzLmRlYm91bmNlTG9hZCgpOyAvLyDpmLLmipbliqDovb0KICAgIH0sCiAgICAvLyDpmLLmipbliqDovb0KICAgIGRlYm91bmNlTG9hZDogXy5kZWJvdW5jZShmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwgMzAwKQogIH0KfTs="},{"version":3,"names":["request","name","data","loading","pageNum","pageSize","total","tableData","created","load","methods","get","params","then","res","code","records","$message","error","msg","catch","handleDelete","row","delete","commentId","success","id","handleSizeChange","newPageSize","debounceLoad","handleCurrentChange","newPageNum","_","debounce"],"sources":["C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\jubao.vue"],"sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n    <!-- 数据表格 -->\n    <el-table\n      v-loading=\"loading\"\n      :data=\"tableData\"\n      border\n      stripe\n      style=\"width: 100%\"\n    >\n      <el-table-column prop=\"user\" label=\"投诉人\"></el-table-column>\n      <el-table-column prop=\"content\" label=\"投诉内容\"></el-table-column>\n      <el-table-column label=\"操作\">\n        <template #default=\"scope\">\n          <el-popconfirm title=\"确定删除吗？\" @confirm=\"handleDelete(scope.row)\">\n            <template #reference>\n              <el-button size=\"mini\" type=\"danger\">已知悉并删除该评论</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[5, 10, 20]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"Jubao\",\n  data() {\n    return {\n      loading: false, // 表格加载状态\n      pageNum: 1, // 当前页码\n      pageSize: 10, // 每页条数\n      total: 0, // 数据总条数\n      tableData: [], // 表格数据\n    };\n  },\n  created() {\n    this.load(); // 页面加载时获取数据\n  },\n  methods: {\n    // 获取数据\n    load() {\n      this.loading = true;\n      request\n        .get(\"/jubao/page\", {\n          params: {\n            pageNum: this.pageNum,\n            pageSize: this.pageSize,\n          },\n        })\n        .then((res) => {\n          this.loading = false;\n          if (res.code === \"0\") {\n            this.tableData = res.data.records;\n            this.total = res.data.total;\n          } else {\n            this.$message.error(res.msg || \"数据加载失败\");\n          }\n        })\n        .catch(() => {\n          this.loading = false;\n          this.$message.error(\"请求失败，请稍后重试\");\n        });\n    },\n\n    // 删除投诉和评论\n    async handleDelete(row) {\n      this.loading = true;\n      try {\n        // 删除评论\n        await request.delete(`/message/${row.commentId}`);\n        this.$message.success(\"删除评论成功\");\n\n        // 删除投诉\n        await request.delete(`/jubao/${row.id}`);\n        this.$message.success(\"删除投诉记录成功\");\n\n        // 刷新表格\n        this.load();\n      } catch (error) {\n        this.$message.error(\"删除失败，请稍后重试\");\n      } finally {\n        this.loading = false;\n      }\n    },\n\n    // 分页事件\n    handleSizeChange(newPageSize) {\n      this.pageSize = newPageSize;\n      this.debounceLoad(); // 防抖加载\n    },\n    handleCurrentChange(newPageNum) {\n      this.pageNum = newPageNum;\n      this.debounceLoad(); // 防抖加载\n    },\n\n    // 防抖加载\n    debounceLoad: _.debounce(function () {\n      this.load();\n    }, 300),\n  },\n};\n</script>\n"],"mappings":"AAsCA,OAAOA,OAAM,MAAO,iBAAiB;AAErC,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,OAAO,EAAE,KAAK;MAAE;MAChBC,OAAO,EAAE,CAAC;MAAE;MACZC,QAAQ,EAAE,EAAE;MAAE;MACdC,KAAK,EAAE,CAAC;MAAE;MACVC,SAAS,EAAE,EAAE,CAAE;IACjB,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,IAAI,CAAC,CAAC,EAAE;EACf,CAAC;EACDC,OAAO,EAAE;IACP;IACAD,IAAIA,CAAA,EAAG;MACL,IAAI,CAACN,OAAM,GAAI,IAAI;MACnBH,OAAM,CACHW,GAAG,CAAC,aAAa,EAAE;QAClBC,MAAM,EAAE;UACNR,OAAO,EAAE,IAAI,CAACA,OAAO;UACrBC,QAAQ,EAAE,IAAI,CAACA;QACjB;MACF,CAAC,EACAQ,IAAI,CAAEC,GAAG,IAAK;QACb,IAAI,CAACX,OAAM,GAAI,KAAK;QACpB,IAAIW,GAAG,CAACC,IAAG,KAAM,GAAG,EAAE;UACpB,IAAI,CAACR,SAAQ,GAAIO,GAAG,CAACZ,IAAI,CAACc,OAAO;UACjC,IAAI,CAACV,KAAI,GAAIQ,GAAG,CAACZ,IAAI,CAACI,KAAK;QAC7B,OAAO;UACL,IAAI,CAACW,QAAQ,CAACC,KAAK,CAACJ,GAAG,CAACK,GAAE,IAAK,QAAQ,CAAC;QAC1C;MACF,CAAC,EACAC,KAAK,CAAC,MAAM;QACX,IAAI,CAACjB,OAAM,GAAI,KAAK;QACpB,IAAI,CAACc,QAAQ,CAACC,KAAK,CAAC,YAAY,CAAC;MACnC,CAAC,CAAC;IACN,CAAC;IAED;IACA,MAAMG,YAAYA,CAACC,GAAG,EAAE;MACtB,IAAI,CAACnB,OAAM,GAAI,IAAI;MACnB,IAAI;QACF;QACA,MAAMH,OAAO,CAACuB,MAAM,CAAC,YAAYD,GAAG,CAACE,SAAS,EAAE,CAAC;QACjD,IAAI,CAACP,QAAQ,CAACQ,OAAO,CAAC,QAAQ,CAAC;;QAE/B;QACA,MAAMzB,OAAO,CAACuB,MAAM,CAAC,UAAUD,GAAG,CAACI,EAAE,EAAE,CAAC;QACxC,IAAI,CAACT,QAAQ,CAACQ,OAAO,CAAC,UAAU,CAAC;;QAEjC;QACA,IAAI,CAAChB,IAAI,CAAC,CAAC;MACb,EAAE,OAAOS,KAAK,EAAE;QACd,IAAI,CAACD,QAAQ,CAACC,KAAK,CAAC,YAAY,CAAC;MACnC,UAAU;QACR,IAAI,CAACf,OAAM,GAAI,KAAK;MACtB;IACF,CAAC;IAED;IACAwB,gBAAgBA,CAACC,WAAW,EAAE;MAC5B,IAAI,CAACvB,QAAO,GAAIuB,WAAW;MAC3B,IAAI,CAACC,YAAY,CAAC,CAAC,EAAE;IACvB,CAAC;IACDC,mBAAmBA,CAACC,UAAU,EAAE;MAC9B,IAAI,CAAC3B,OAAM,GAAI2B,UAAU;MACzB,IAAI,CAACF,YAAY,CAAC,CAAC,EAAE;IACvB,CAAC;IAED;IACAA,YAAY,EAAEG,CAAC,CAACC,QAAQ,CAAC,YAAY;MACnC,IAAI,CAACxB,IAAI,CAAC,CAAC;IACb,CAAC,EAAE,GAAG;EACR;AACF,CAAC","ignoreList":[]}]}