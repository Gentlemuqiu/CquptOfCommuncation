{"remainingRequest":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\Person.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\Person.vue","mtime":1735194085984},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\babel.config.js","mtime":1735045997675},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735088236947},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQuaXRlcmF0b3IuZmlsdGVyLmpzIjsKaW1wb3J0IHsgUGx1cyB9IGZyb20gJ0BlbGVtZW50LXBsdXMvaWNvbnMtdnVlJzsKaW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQZXJzb24iLAogIGNvbXBvbmVudHM6IHsKICAgIFBsdXMKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgaWQ6ICcnLAogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBuaWNrTmFtZTogJycsCiAgICAgICAgcGhvbmU6ICcnLAogICAgICAgIGFnZTogJycsCiAgICAgICAgc2V4OiAnJywKICAgICAgICBhZGRyZXNzOiAnJywKICAgICAgICBhdmF0YXI6ICcnLAogICAgICAgIHRhZ3NBcnI6IFtdLAogICAgICAgIHRhZ3M6ICcnCiAgICAgIH0sCiAgICAgIGF2YWlsYWJsZVRhZ3M6IFsn5Zac5YmnJywgJ+aCrOeWkScsICfniLHmg4UnLCAn5Yqo5L2cJywgJ+WKqOeUuycsICfniq/nvaonLCAn5oOK5oKaJywgJ+WGkumZqScsICfljoblj7InLCAn5oiY5LqJJywgJ+e6quW9leeJhycsICfnp5HlubsnXSwKICAgICAgcnVsZXM6IHsKICAgICAgICBuaWNrTmFtZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaYteensCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBwaG9uZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeaJi+acuuWPtycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9LCB7CiAgICAgICAgICBwYXR0ZXJuOiAvXjFbMy05XVxkezl9JC8sCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+356CBJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIGFnZTogW3sKICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgbWVzc2FnZTogJ+W5tOm+hOW/hemhu+S4uuaVsOWtlycsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmluaXRpYWxpemVEYXRhKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBpbml0aWFsaXplRGF0YSgpIHsKICAgICAgYXdhaXQgdGhpcy5sb2FkVXNlckluZm8oKTsKICAgICAgaWYgKHRoaXMuZm9ybS5pZCAmJiAoIXRoaXMuZm9ybS50YWdzQXJyIHx8IHRoaXMuZm9ybS50YWdzQXJyLmxlbmd0aCA9PT0gMCkpIHsKICAgICAgICBhd2FpdCB0aGlzLmZldGNoVXNlclRhZ3MoKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGxvYWRVc2VySW5mbygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB1c2VyU3RyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpOwogICAgICAgIGlmICh1c2VyU3RyKSB7CiAgICAgICAgICBjb25zdCB1c2VyRGF0YSA9IEpTT04ucGFyc2UodXNlclN0cik7CiAgICAgICAgICB0aGlzLmZvcm0gPSB7CiAgICAgICAgICAgIC4uLnVzZXJEYXRhLAogICAgICAgICAgICB0YWdzQXJyOiB1c2VyRGF0YS50YWdzID8gdXNlckRhdGEudGFncy5zcGxpdCgnLCcpLmZpbHRlcihCb29sZWFuKSA6IFtdCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ1BhcnNlIHVzZXIgaW5mbyBlcnJvcjonLCBlKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliqDovb3nlKjmiLfkv6Hmga/lpLHotKUnKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGZldGNoVXNlclRhZ3MoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0LmdldCgnL3VzZXIvdGFncycpOwogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAnMCcgJiYgcmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgY29uc3QgdGFncyA9IHJlc3BvbnNlLmRhdGEuc3BsaXQoJywnKS5maWx0ZXIoQm9vbGVhbik7CiAgICAgICAgICBpZiAodGFncy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRoaXMuZm9ybS50YWdzQXJyID0gdGFncy5zbGljZSgwLCAzKTsKICAgICAgICAgICAgdGhpcy5mb3JtLnRhZ3MgPSB0aGlzLmZvcm0udGFnc0Fyci5qb2luKCcsJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZldGNoIHRhZ3MgZXJyb3I6JywgZXJyb3IpOwogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn5qCH562+5Yqg6L295aSx6LSl77yM5oKo5Y+v5Lul6YeN5paw6YCJ5oup5qCH562+Jyk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVUYWdzQ2hhbmdlKHRhZ3MpIHsKICAgICAgaWYgKHRhZ3MubGVuZ3RoID4gMykgewogICAgICAgIHRoaXMuZm9ybS50YWdzQXJyID0gdGFncy5zbGljZSgwLCAzKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+acgOWkmuWPquiDvemAieaLqTPkuKrmoIfnrb4nKTsKICAgICAgfQogICAgICB0aGlzLmZvcm0udGFncyA9IHRoaXMuZm9ybS50YWdzQXJyLmpvaW4oJywnKTsKICAgIH0sCiAgICBpc1RhZ0Rpc2FibGVkKHRhZykgewogICAgICByZXR1cm4gdGhpcy5mb3JtLnRhZ3NBcnIubGVuZ3RoID49IDMgJiYgIXRoaXMuZm9ybS50YWdzQXJyLmluY2x1ZGVzKHRhZyk7CiAgICB9LAogICAgYXN5bmMgdXBkYXRlRm9ybSgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCB2YWxpZCA9IGF3YWl0IHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpOwogICAgICAgIGlmICghdmFsaWQpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+35a6M5ZaE5b+F5aGr5L+h5oGvJyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgY29uc3QgZm9ybURhdGEgPSB7CiAgICAgICAgICAuLi50aGlzLmZvcm0sCiAgICAgICAgICB0YWdzOiB0aGlzLmZvcm0udGFnc0Fyci5qb2luKCcsJykKICAgICAgICB9OwogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdC5wdXQoJy91c2VyJywgZm9ybURhdGEpOwogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAnMCcpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5Yqf77yBJyk7CiAgICAgICAgICB0aGlzLnVwZGF0ZUxvY2FsU3RvcmFnZShmb3JtRGF0YSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcihyZXNwb25zZS5tc2cgfHwgJ+S/neWtmOWksei0pScpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdVcGRhdGUgdXNlciBlcnJvcjonLCBlcnJvcik7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihlcnJvci5tZXNzYWdlIHx8ICfkv53lrZjlpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUxvY2FsU3RvcmFnZSh1c2VyRGF0YSkgewogICAgICB0cnkgewogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeSh1c2VyRGF0YSkpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignVXBkYXRlIHN0b3JhZ2UgZXJyb3I6JywgZSk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pu05paw5pys5Zyw5a2Y5YKo5aSx6LSlJyk7CiAgICAgIH0KICAgIH0sCiAgICBiZWZvcmVBdmF0YXJVcGxvYWQoZmlsZSkgewogICAgICBjb25zdCBpc0ltYWdlID0gZmlsZS50eXBlLnN0YXJ0c1dpdGgoImltYWdlLyIpOwogICAgICBjb25zdCBpc0x0MTBNID0gZmlsZS5zaXplIC8gMTAyNCAvIDEwMjQgPCAxMDsKICAgICAgaWYgKCFpc0ltYWdlKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95piv5Zu+54mH5qC85byPIScpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoIWlzTHQxME0pIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4cgMTBNQiEnKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIGlzSW1hZ2UgJiYgaXNMdDEwTTsKICAgIH0sCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcykgewogICAgICBpZiAocmVzLmNvZGUgPT09ICcwJykgewogICAgICAgIHRoaXMuZm9ybS5hdmF0YXIgPSByZXMuZGF0YTsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WktOWDj+S4iuS8oOaIkOWKn++8gScpOwogICAgICAgIHRoaXMudXBkYXRlTG9jYWxTdG9yYWdlKHRoaXMuZm9ybSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubXNnIHx8ICfkuIrkvKDlpLHotKUnKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUF2YXRhckVycm9yKGVycikgewogICAgICBjb25zb2xlLmVycm9yKCdVcGxvYWQgZXJyb3I6JywgZXJyKTsKICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5aS05YOP5LiK5Lyg5aSx6LSl77yM6K+35qOA5p+l572R57uc6L+e5o6lJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Plus","request","name","components","data","form","id","username","nickName","phone","age","sex","address","avatar","tagsArr","tags","availableTags","rules","required","message","trigger","pattern","type","loading","created","initializeData","methods","loadUserInfo","length","fetchUserTags","userStr","sessionStorage","getItem","userData","JSON","parse","split","filter","Boolean","e","console","error","$message","response","get","code","slice","join","warning","handleTagsChange","isTagDisabled","tag","includes","updateForm","valid","$refs","validate","formData","put","success","updateLocalStorage","Error","msg","setItem","stringify","beforeAvatarUpload","file","isImage","startsWith","isLt10M","size","handleAvatarSuccess","res","handleAvatarError","err"],"sources":["C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\Person.vue"],"sourcesContent":["<template>\n  <div class=\"page-container\">\n    <div class=\"person-container\">\n      <el-card class=\"info-card\" :body-style=\"{ padding: '30px' }\">\n        <div class=\"card-header\">\n          <h2 class=\"profile-title\">个人信息</h2>\n        </div>\n        \n        <el-form \n          ref=\"form\" \n          :model=\"form\" \n          :rules=\"rules\" \n          label-width=\"80px\"\n          class=\"profile-form\"\n        >\n        <div class=\"avatar-wrapper\">\n    <el-upload\n      class=\"avatar-uploader\"\n      action=\"http://localhost:8080/files/upload\"\n      :show-file-list=\"false\"\n      :on-success=\"handleAvatarSuccess\"\n      :on-error=\"handleAvatarError\"\n      :before-upload=\"beforeAvatarUpload\"\n    >\n      <div class=\"avatar-container\" :class=\"{ 'no-avatar': !form.avatar }\">\n        <img \n          v-if=\"form.avatar\" \n          :src=\"form.avatar\" \n          class=\"avatar\" \n          alt=\"用户头像\"\n        />\n        <template v-else>\n          <el-icon class=\"avatar-uploader-icon\">\n            <Plus />\n          </el-icon>\n          <div class=\"avatar-tip\">点击上传头像</div>\n        </template>\n      </div>\n    </el-upload>\n  </div>\n\n          <!-- 表单部分 -->\n          <div class=\"form-section\">\n            <el-form-item label=\"用户名\" prop=\"username\">\n              <el-input v-model=\"form.username\" disabled></el-input>\n            </el-form-item>\n            \n            <el-form-item label=\"昵称\" prop=\"nickName\">\n              <el-input \n                v-model=\"form.nickName\" \n                placeholder=\"请输入昵称\"\n                clearable\n              ></el-input>\n            </el-form-item>\n            \n            <el-form-item label=\"手机号\" prop=\"phone\">\n              <el-input \n                v-model=\"form.phone\" \n                placeholder=\"请输入手机号\"\n                clearable\n              ></el-input>\n            </el-form-item>\n            \n            <el-form-item label=\"年龄\" prop=\"age\">\n              <el-input-number \n                v-model=\"form.age\" \n                :min=\"0\" \n                :max=\"150\" \n                controls-position=\"right\"\n                placeholder=\"请输入年龄\"\n              ></el-input-number>\n            </el-form-item>\n            \n            <el-form-item label=\"性别\">\n              <el-radio-group v-model=\"form.sex\">\n                <el-radio label=\"男\">男</el-radio>\n                <el-radio label=\"女\">女</el-radio>\n                <el-radio label=\"其他\">其他</el-radio>\n              </el-radio-group>\n            </el-form-item>\n            \n            <el-form-item label=\"地址\" prop=\"address\">\n              <el-input\n                v-model=\"form.address\"\n                type=\"textarea\"\n                placeholder=\"请输入地址\"\n                :rows=\"2\"\n                clearable\n              ></el-input>\n            </el-form-item>\n            \n            <!-- 简化的标签选择 -->\n            <el-form-item label=\"个性标签\" prop=\"tagsArr\">\n              <el-select\n                v-model=\"form.tagsArr\"\n                multiple\n                clearable\n                placeholder=\"选择标签（最多3个）\"\n                style=\"width: 100%\"\n                @change=\"handleTagsChange\"\n              >\n                <el-option\n                  v-for=\"tag in availableTags\"\n                  :key=\"tag\"\n                  :label=\"tag\"\n                  :value=\"tag\"\n                  :disabled=\"isTagDisabled(tag)\"\n                ></el-option>\n              </el-select>\n            </el-form-item>\n          </div>\n\n          <!-- 提交按钮 -->\n          <div class=\"button-container\">\n            <el-button \n              type=\"primary\" \n              @click=\"updateForm\" \n              :loading=\"loading\"\n              class=\"submit-button\"\n            >\n              保存修改\n            </el-button>\n          </div>\n        </el-form>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Plus } from '@element-plus/icons-vue'\nimport request from \"@/utils/request\"\n\nexport default {\n  name: \"Person\",\n  components: {\n    Plus\n  },\n  data() {\n    return {\n      form: {\n        id: '',\n        username: '',\n        nickName: '',\n        phone: '',\n        age: '',\n        sex: '',\n        address: '',\n        avatar: '',\n        tagsArr: [],\n        tags: ''\n      },\n      availableTags: ['喜剧', '悬疑', '爱情', '动作', '动画', '犯罪', '惊悚', '冒险', '历史', '战争', '纪录片', '科幻'],\n      rules: {\n        nickName: [\n          { required: true, message: '请输入昵称', trigger: 'blur' }\n        ],\n        phone: [\n          { required: true, message: '请输入手机号', trigger: 'blur' },\n          { pattern: /^1[3-9]\\d{9}$/, message: '请输入正确的手机号码', trigger: 'blur' }\n        ],\n        age: [\n          { type: 'number', message: '年龄必须为数字', trigger: 'blur' }\n        ],\n      },\n      loading: false\n    }\n  },\n  created() {\n    this.initializeData()\n  },\n  methods: {\n    async initializeData() {\n      await this.loadUserInfo()\n      if (this.form.id && (!this.form.tagsArr || this.form.tagsArr.length === 0)) {\n        await this.fetchUserTags()\n      }\n    },\n    \n    async loadUserInfo() {\n      try {\n        const userStr = sessionStorage.getItem(\"user\")\n        if (userStr) {\n          const userData = JSON.parse(userStr)\n          this.form = {\n            ...userData,\n            tagsArr: userData.tags ? userData.tags.split(',').filter(Boolean) : []\n          }\n        }\n      } catch (e) {\n        console.error('Parse user info error:', e)\n        this.$message.error('加载用户信息失败')\n      }\n    },\n\n    async fetchUserTags() {\n      try {\n        const response = await request.get('/user/tags')\n        if (response.code === '0' && response.data) {\n          const tags = response.data.split(',').filter(Boolean)\n          if (tags.length > 0) {\n            this.form.tagsArr = tags.slice(0, 3)\n            this.form.tags = this.form.tagsArr.join(',')\n          }\n        }\n      } catch (error) {\n        console.error('Fetch tags error:', error)\n        this.$message.warning('标签加载失败，您可以重新选择标签')\n      }\n    },\n\n    handleTagsChange(tags) {\n      if (tags.length > 3) {\n        this.form.tagsArr = tags.slice(0, 3)\n        this.$message.warning('最多只能选择3个标签')\n      }\n      this.form.tags = this.form.tagsArr.join(',')\n    },\n\n    isTagDisabled(tag) {\n      return this.form.tagsArr.length >= 3 && !this.form.tagsArr.includes(tag)\n    },\n\n    async updateForm() {\n      try {\n        const valid = await this.$refs.form.validate()\n        if (!valid) {\n          this.$message.warning('请完善必填信息')\n          return\n        }\n\n        this.loading = true\n        const formData = {\n          ...this.form,\n          tags: this.form.tagsArr.join(',')\n        }\n\n        const response = await request.put('/user', formData)\n        if (response.code === '0') {\n          this.$message.success('保存成功！')\n          this.updateLocalStorage(formData)\n        } else {\n          throw new Error(response.msg || '保存失败')\n        }\n      } catch (error) {\n        console.error('Update user error:', error)\n        this.$message.error(error.message || '保存失败，请稍后重试')\n      } finally {\n        this.loading = false\n      }\n    },\n\n    updateLocalStorage(userData) {\n      try {\n        sessionStorage.setItem('user', JSON.stringify(userData))\n      } catch (e) {\n        console.error('Update storage error:', e)\n        this.$message.error('更新本地存储失败')\n      }\n    },\n\n    beforeAvatarUpload(file) {\n      const isImage = file.type.startsWith(\"image/\") \n      const isLt10M = file.size / 1024 / 1024 < 10\n\n      if (!isImage) {\n        this.$message.error('上传头像图片只能是图片格式!')\n        return false\n      }\n      if (!isLt10M) {\n        this.$message.error('上传头像图片大小不能超过 10MB!')\n        return false\n      }\n      \n      return isImage && isLt10M\n    },\n\n    handleAvatarSuccess(res) {\n      if (res.code === '0') {\n        this.form.avatar = res.data\n        this.$message.success('头像上传成功！')\n        this.updateLocalStorage(this.form)\n      } else {\n        this.$message.error(res.msg || '上传失败')\n      }\n    },\n\n    handleAvatarError(err) {\n      console.error('Upload error:', err)\n      this.$message.error('头像上传失败，请检查网络连接')\n    }\n  }\n}\n</script>\n\n<style scoped>\n.page-container {\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  padding: 40px 20px;\n  background-color: #f5f7fa;\n}\n\n.person-container {\n  width: 100%;\n  max-width: 600px;\n}\n\n.info-card {\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);\n}\n\n.card-header {\n  margin-bottom: 30px;\n  text-align: center;\n}\n\n.profile-title {\n  color: #303133;\n  font-size: 24px;\n  font-weight: 500;\n  margin: 0;\n}\n\n.profile-form {\n  margin-top: 20px;\n}\n\n.avatar-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 40px;\n}\n\n.avatar-container {\n  width: 120px;\n  height: 120px;\n  overflow: hidden;\n  border-radius: 50%;\n  margin: 0 auto;\n  cursor: pointer;\n  border: 2px dashed #d9d9d9;\n  transition: all 0.3s;\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.no-avatar {\n  background: #f5f7fa;\n}\n\n.avatar-container:hover {\n  border-color: #409EFF;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  display: block;\n}\n\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n}\n\n.avatar-tip {\n  font-size: 12px;\n  color: #666;\n  margin-top: 8px;\n  text-align: center;\n}\n\n.no-avatar .avatar-tip {\n  position: absolute;\n  bottom: 10px;\n}\n.form-section {\n  max-width: 500px;\n  margin: 0 auto;\n}\n\n.form-section :deep(.el-form-item) {\n  margin-bottom: 22px;\n}\n\n.button-container {\n  text-align: center;\n  margin-top: 40px;\n}\n\n.submit-button {\n  width: 180px;\n  height: 40px;\n  font-size: 16px;\n}\n\n/* Element UI 组件样式优化 */\n:deep(.el-form-item__label) {\n  font-weight: 500;\n  color: #606266;\n}\n\n:deep(.el-input__inner) {\n  height: 40px;\n  line-height: 40px;\n}\n\n:deep(.el-radio) {\n  margin-right: 30px;\n}\n\n:deep(.el-select) {\n  width: 100%;\n}\n\n/* 响应式布局 */\n@media screen and (max-width: 768px) {\n  .page-container {\n    padding: 20px 10px;\n  }\n\n  .person-container {\n    max-width: 100%;\n  }\n\n  .profile-form {\n    padding: 0;\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]}]}