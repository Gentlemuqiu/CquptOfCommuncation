{"remainingRequest":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\src\\views\\Person.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\src\\views\\Person.vue","mtime":1735177226194},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\babel.config.js","mtime":1735045997675},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735088236947},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQZXJzb24iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIG5pY2tOYW1lOiAiIiwKICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgYWdlOiAiIiwKICAgICAgICBzZXg6ICIiLAogICAgICAgIGFkZHJlc3M6ICIiLAogICAgICAgIGF2YXRhcjogIiIgLy8g55So5oi35aS05YOP6Lev5b6ECiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDkv53lrZjmjInpkq7liqDovb3nirbmgIEKICAgICAgbmV0d29ya0ltYWdlOiByZXF1aXJlKCJAL2Fzc2V0cy9jc3MvNDA0LnN2ZyIpIC8vIOe9kee7nOS/oeaBr+WbvueJh+i3r+W+hAogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyDliqDovb3nlKjmiLfmlbDmja4KICAgIGNvbnN0IHVzZXIgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikgfHwgInt9IjsKICAgIHRoaXMuZm9ybSA9IEpTT04ucGFyc2UodXNlcik7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDkuIrkvKDlpLTlg4/liY3mo4Dmn6UKICAgIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlKSB7CiAgICAgIGNvbnN0IGlzSW1hZ2UgPSBmaWxlLnR5cGUuc3RhcnRzV2l0aCgiaW1hZ2UvIik7CiAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMTA7CiAgICAgIGlmICghaXNJbWFnZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4iuS8oOWktOWDj+WbvueJh+WPquiDveaYr+WbvueJh+agvOW8j++8gSIpOwogICAgICB9CiAgICAgIGlmICghaXNMdDJNKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5aS05YOP5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDEwTULvvIEiKTsKICAgICAgfQogICAgICByZXR1cm4gaXNJbWFnZSAmJiBpc0x0Mk07CiAgICB9LAogICAgLy8g5LiK5Lyg5oiQ5Yqf5aSE55CGCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzKHJlcykgewogICAgICBpZiAocmVzLmNvZGUgPT09ICIwIiAmJiByZXMuZGF0YS51cmwpIHsKICAgICAgICB0aGlzLmZvcm0uYXZhdGFyID0gcmVzLmRhdGEudXJsOyAvLyDlgYforr7lkI7nq6/ov5Tlm57lrZfmrrXkuLogdXJsCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLlpLTlg4/kuIrkvKDmiJDlip/vvIEiKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkuIrkvKDlpLHotKXvvIzor7fnqI3lkI7ph43or5UiKTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOWksei0peWkhOeQhgogICAgaGFuZGxlQXZhdGFyRXJyb3IoKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuWktOWDj+S4iuS8oOWksei0pe+8jOivt+ajgOafpee9kee7nOaIluWQjuerr+acjeWKoe+8gSIpOwogICAgfSwKICAgIC8vIOS/neWtmOeUqOaIt+S/oeaBrwogICAgdXBkYXRlKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICByZXF1ZXN0LnB1dCgiL3VzZXIiLCB0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBpZiAocmVzLmNvZGUgPT09ICIwIikgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv53lrZjmiJDlip/vvIEiKTsKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInVzZXIiLCBKU09OLnN0cmluZ2lmeSh0aGlzLmZvcm0pKTsgLy8g5pu05paw5pys5Zyw5a2Y5YKoCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1zZyB8fCAi5L+d5a2Y5aSx6LSl77yBIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5L+d5a2Y5aSx6LSl77yM6K+356iN5ZCO6YeN6K+V77yBIik7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["request","name","data","form","username","nickName","phone","age","sex","address","avatar","loading","networkImage","require","created","user","sessionStorage","getItem","JSON","parse","methods","beforeAvatarUpload","file","isImage","type","startsWith","isLt2M","size","$message","error","handleAvatarSuccess","res","code","url","success","handleAvatarError","update","put","then","setItem","stringify","msg","catch"],"sources":["C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\src\\views\\Person.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- 用户信息卡片 -->\n    <el-card style=\"width: 40%; margin: 10px; float: left;\">\n      <el-form ref=\"form\" :model=\"form\" label-width=\"80px\">\n        <!-- 上传头像 -->\n        <el-form-item>\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"http://localhost:8080/files/upload\"\n            :show-file-list=\"false\"\n            :on-success=\"handleAvatarSuccess\"\n            :on-error=\"handleAvatarError\"\n            :before-upload=\"beforeAvatarUpload\"\n          >\n            <img v-if=\"form.avatar\" :src=\"form.avatar\" class=\"avatar\" alt=\"用户头像\" />\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n          </el-upload>\n        </el-form-item>\n        <!-- 用户信息表单 -->\n        <el-form-item label=\"用户名\">\n          <el-input v-model=\"form.username\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"昵称\">\n          <el-input v-model=\"form.nickName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"手机号\">\n          <el-input v-model=\"form.phone\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"年龄\">\n          <el-input v-model=\"form.age\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"性别\">\n          <el-input v-model=\"form.sex\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"地址\">\n          <el-input v-model=\"form.address\"></el-input>\n        </el-form-item>\n      </el-form>\n      <!-- 保存按钮 -->\n      <div style=\"text-align: center\">\n        <el-button type=\"primary\" @click=\"update\" :loading=\"loading\">保存</el-button>\n      </div>\n    </el-card>\n\n    <!-- 用户网络信息展示 -->\n    <el-card style=\"width: 55%; margin: 10px; float: right;\">\n      <div style=\"padding: 10px; background-color: #f5f5f5; margin-bottom: 10px;\">\n        <h3>用户网络配置信息</h3>\n      </div>\n      <div>\n        <el-image :src=\"networkImage\" style=\"width: 100%; height: auto;\" alt=\"网络信息图片\"></el-image>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"Person\",\n  data() {\n    return {\n      form: {\n        username: \"\",\n        nickName: \"\",\n        phone: \"\",\n        age: \"\",\n        sex: \"\",\n        address: \"\",\n        avatar: \"\", // 用户头像路径\n      },\n      loading: false, // 保存按钮加载状态\n      networkImage: require(\"@/assets/css/404.svg\"), // 网络信息图片路径\n    };\n  },\n  created() {\n    // 加载用户数据\n    const user = sessionStorage.getItem(\"user\") || \"{}\";\n    this.form = JSON.parse(user);\n  },\n  methods: {\n    // 上传头像前检查\n    beforeAvatarUpload(file) {\n      const isImage = file.type.startsWith(\"image/\");\n      const isLt2M = file.size / 1024 / 1024 < 10;\n\n      if (!isImage) {\n        this.$message.error(\"上传头像图片只能是图片格式！\");\n      }\n      if (!isLt2M) {\n        this.$message.error(\"上传头像图片大小不能超过 10MB！\");\n      }\n      return isImage && isLt2M;\n    },\n\n    // 上传成功处理\n    handleAvatarSuccess(res) {\n      if (res.code === \"0\" && res.data.url) {\n        this.form.avatar = res.data.url; // 假设后端返回字段为 url\n        this.$message.success(\"头像上传成功！\");\n      } else {\n        this.$message.error(\"上传失败，请稍后重试\");\n      }\n    },\n\n    // 上传失败处理\n    handleAvatarError() {\n      this.$message.error(\"头像上传失败，请检查网络或后端服务！\");\n    },\n\n    // 保存用户信息\n    update() {\n      this.loading = true;\n      request.put(\"/user\", this.form).then((res) => {\n        this.loading = false;\n        if (res.code === \"0\") {\n          this.$message.success(\"保存成功！\");\n          sessionStorage.setItem(\"user\", JSON.stringify(this.form)); // 更新本地存储\n        } else {\n          this.$message.error(res.msg || \"保存失败！\");\n        }\n      }).catch(() => {\n        this.loading = false;\n        this.$message.error(\"保存失败，请稍后重试！\");\n      });\n    },\n  },\n};\n</script>\n<style scoped>\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n}\n.avatar {\n  width: 178px;\n  height: 178px;\n  display: block;\n  border-radius: 50%;\n}\n</style>\n"],"mappings":"AA2DA,OAAOA,OAAM,MAAO,iBAAiB;AAErC,eAAe;EACbC,IAAI,EAAE,QAAQ;EACdC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE,EAAE;QACZC,KAAK,EAAE,EAAE;QACTC,GAAG,EAAE,EAAE;QACPC,GAAG,EAAE,EAAE;QACPC,OAAO,EAAE,EAAE;QACXC,MAAM,EAAE,EAAE,CAAE;MACd,CAAC;MACDC,OAAO,EAAE,KAAK;MAAE;MAChBC,YAAY,EAAEC,OAAO,CAAC,sBAAsB,CAAC,CAAE;IACjD,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,MAAMC,IAAG,GAAIC,cAAc,CAACC,OAAO,CAAC,MAAM,KAAK,IAAI;IACnD,IAAI,CAACd,IAAG,GAAIe,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC;EAC9B,CAAC;EACDK,OAAO,EAAE;IACP;IACAC,kBAAkBA,CAACC,IAAI,EAAE;MACvB,MAAMC,OAAM,GAAID,IAAI,CAACE,IAAI,CAACC,UAAU,CAAC,QAAQ,CAAC;MAC9C,MAAMC,MAAK,GAAIJ,IAAI,CAACK,IAAG,GAAI,IAAG,GAAI,IAAG,GAAI,EAAE;MAE3C,IAAI,CAACJ,OAAO,EAAE;QACZ,IAAI,CAACK,QAAQ,CAACC,KAAK,CAAC,gBAAgB,CAAC;MACvC;MACA,IAAI,CAACH,MAAM,EAAE;QACX,IAAI,CAACE,QAAQ,CAACC,KAAK,CAAC,oBAAoB,CAAC;MAC3C;MACA,OAAON,OAAM,IAAKG,MAAM;IAC1B,CAAC;IAED;IACAI,mBAAmBA,CAACC,GAAG,EAAE;MACvB,IAAIA,GAAG,CAACC,IAAG,KAAM,GAAE,IAAKD,GAAG,CAAC7B,IAAI,CAAC+B,GAAG,EAAE;QACpC,IAAI,CAAC9B,IAAI,CAACO,MAAK,GAAIqB,GAAG,CAAC7B,IAAI,CAAC+B,GAAG,EAAE;QACjC,IAAI,CAACL,QAAQ,CAACM,OAAO,CAAC,SAAS,CAAC;MAClC,OAAO;QACL,IAAI,CAACN,QAAQ,CAACC,KAAK,CAAC,YAAY,CAAC;MACnC;IACF,CAAC;IAED;IACAM,iBAAiBA,CAAA,EAAG;MAClB,IAAI,CAACP,QAAQ,CAACC,KAAK,CAAC,oBAAoB,CAAC;IAC3C,CAAC;IAED;IACAO,MAAMA,CAAA,EAAG;MACP,IAAI,CAACzB,OAAM,GAAI,IAAI;MACnBX,OAAO,CAACqC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAClC,IAAI,CAAC,CAACmC,IAAI,CAAEP,GAAG,IAAK;QAC5C,IAAI,CAACpB,OAAM,GAAI,KAAK;QACpB,IAAIoB,GAAG,CAACC,IAAG,KAAM,GAAG,EAAE;UACpB,IAAI,CAACJ,QAAQ,CAACM,OAAO,CAAC,OAAO,CAAC;UAC9BlB,cAAc,CAACuB,OAAO,CAAC,MAAM,EAAErB,IAAI,CAACsB,SAAS,CAAC,IAAI,CAACrC,IAAI,CAAC,CAAC,EAAE;QAC7D,OAAO;UACL,IAAI,CAACyB,QAAQ,CAACC,KAAK,CAACE,GAAG,CAACU,GAAE,IAAK,OAAO,CAAC;QACzC;MACF,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;QACb,IAAI,CAAC/B,OAAM,GAAI,KAAK;QACpB,IAAI,CAACiB,QAAQ,CAACC,KAAK,CAAC,aAAa,CAAC;MACpC,CAAC,CAAC;IACJ;EACF;AACF,CAAC","ignoreList":[]}]}