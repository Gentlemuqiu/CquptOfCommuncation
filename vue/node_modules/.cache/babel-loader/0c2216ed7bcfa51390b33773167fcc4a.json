{"remainingRequest":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\src\\utils\\request.js","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\src\\utils\\request.js","mtime":1735177341846},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\babel.config.js","mtime":1735045997675},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\作业\\软件开发实训二\\javaweb-main\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735088236947}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCBheGlvc1JldHJ5IGZyb20gImF4aW9zLXJldHJ5IjsKY29uc3QgYmFzZVVybCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRVVSTDsgLy8g5LuO546v5aKD5Y+Y6YeP5Lit6K+75Y+W5Z+656GA6Lev5b6ECgovLyDliJvlu7ogYXhpb3Mg5a6e5L6LCmNvbnN0IHJlcXVlc3QgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IGJhc2VVcmwsCiAgLy8g6K6+572u5Z+656GA6Lev5b6ECiAgdGltZW91dDogNTAwMCAvLyDorr7nva7or7fmsYLotoXml7bml7bpl7QKfSk7CgovLyDliqjmgIHor7fmsYLnmb3lkI3ljZUKY29uc3Qgd2hpdGVVcmxzID0gWyIvdXNlci9sb2dpbiIsICIvdXNlci9yZWdpc3RlciJdOwoKLy8g5rOo5YaM6K+35rGC5oum5oiq5ZmoCnJlcXVlc3QuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGNvbmZpZyA9PiB7CiAgLy8g6K6+572u6K+35rGC5aS055qEIENvbnRlbnQtVHlwZQogIGNvbmZpZy5oZWFkZXJzWyJDb250ZW50LVR5cGUiXSA9ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgiOwoKICAvLyDku44gc2Vzc2lvblN0b3JhZ2Ug6I635Y+W55So5oi35L+h5oGvCiAgY29uc3QgdXNlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKTsKICBjb25maWcuaGVhZGVyc1sidXNlcmlkIl0gPSB1c2VyID8gSlNPTi5wYXJzZSh1c2VyKS5pZCA6IDA7IC8vIOiuvue9ruiHquWumuS5ieivt+axguWktAoKICAvLyDmo4Dmn6XmmK/lkKblnKjnmb3lkI3ljZXkuK0KICBpZiAoIXdoaXRlVXJscy5pbmNsdWRlcyhjb25maWcudXJsKSkgewogICAgLy8g5aaC5p6c55So5oi35pyq55m75b2V77yM6Lez6L2s5Yiw55m75b2V6aG16Z2iCiAgICBjb25zdCB1c2VySnNvbiA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKTsKICAgIGlmICghdXNlckpzb24pIHsKICAgICAgcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgICB0aHJvdyBuZXcgRXJyb3IoIueUqOaIt+acqueZu+W9le+8jOi3s+i9rOWIsOeZu+W9lemhtemdoiIpOwogICAgfQogIH0KICByZXR1cm4gY29uZmlnOwp9LCBlcnJvciA9PiB7CiAgLy8g6K+35rGC6ZSZ6K+v5pe26L+U5ZueIFByb21pc2Ug5ouS57udCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CgovLyDms6jlhozlk43lupTmi6bmiKrlmagKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlID0+IHsKICBsZXQgcmVzID0gcmVzcG9uc2UuZGF0YTsKCiAgLy8g5aSE55CG5paH5Lu257G75Z6L5ZON5bqUCiAgaWYgKHJlc3BvbnNlLmNvbmZpZy5yZXNwb25zZVR5cGUgPT09ICJibG9iIikgewogICAgcmV0dXJuIHJlczsKICB9CgogIC8vIOWmguaenOi/lOWbnuaVsOaNruaYr+Wtl+espuS4suexu+Wei++8jOWwneivleino+aekOS4uiBKU09OCiAgaWYgKHR5cGVvZiByZXMgPT09ICJzdHJpbmciKSB7CiAgICByZXMgPSByZXMgPyBKU09OLnBhcnNlKHJlcykgOiByZXM7CiAgfQogIHJldHVybiByZXM7IC8vIOi/lOWbnuacgOe7iOe7k+aenAp9LCBlcnJvciA9PiB7CiAgdmFyIF9lcnJvciRyZXNwb25zZTsKICAvLyDmjZXojrfplJnor6/lubblpITnkIYKICBjb25zb2xlLmVycm9yKCJIVFRQIOmUmeivrzoiLCAoKF9lcnJvciRyZXNwb25zZSA9IGVycm9yLnJlc3BvbnNlKSA9PT0gbnVsbCB8fCBfZXJyb3IkcmVzcG9uc2UgPT09IHZvaWQgMCB8fCAoX2Vycm9yJHJlc3BvbnNlID0gX2Vycm9yJHJlc3BvbnNlLmRhdGEpID09PSBudWxsIHx8IF9lcnJvciRyZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Vycm9yJHJlc3BvbnNlLm1lc3NhZ2UpIHx8IGVycm9yLm1lc3NhZ2UpOwogIGlmIChlcnJvci5yZXNwb25zZSkgewogICAgY29uc3QgewogICAgICBzdGF0dXMKICAgIH0gPSBlcnJvci5yZXNwb25zZTsKCiAgICAvLyDlpoLmnpzmmK8gNDAxIOacquaOiOadg++8jOi3s+i9rOWIsOeZu+W9lemhtemdogogICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7CiAgICAgIHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0KCiAgICAvLyDlhbbku5bnirbmgIHnoIHlpITnkIYKICAgIGlmIChzdGF0dXMgPj0gNDAwICYmIHN0YXR1cyA8IDUwMCkgewogICAgICBjb25zb2xlLndhcm4oYOWuouaIt+err+mUmeivr++8miR7ZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlfWApOwogICAgfSBlbHNlIGlmIChzdGF0dXMgPj0gNTAwKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoIuacjeWKoeWZqOmUmeivr++8jOivt+eojeWQjumHjeivlSIpOwogICAgfQogIH0KICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOyAvLyDov5Tlm54gUHJvbWlzZSDmi5Lnu50KfSk7CgovLyDkuLror7fmsYLmt7vliqDlpLHotKXph43or5XmnLrliLYKYXhpb3NSZXRyeShyZXF1ZXN0LCB7CiAgcmV0cmllczogMywKICAvLyDorr7nva7ph43or5XmrKHmlbAKICByZXRyeUNvbmRpdGlvbjogZXJyb3IgPT4gewogICAgLy8g5LuF5Zyo572R57uc6ZSZ6K+v5oiW6LaF5pe25pe26YeN6K+VCiAgICByZXR1cm4gYXhpb3NSZXRyeS5pc05ldHdvcmtPcklkZW1wb3RlbnRSZXF1ZXN0RXJyb3IoZXJyb3IpOwogIH0sCiAgcmV0cnlEZWxheTogcmV0cnlDb3VudCA9PiB7CiAgICAvLyDph43or5Xlu7bov5/nrZbnlaUKICAgIHJldHVybiByZXRyeUNvdW50ICogMTAwMDsgLy8g5q+P5qyh6YeN6K+V6Ze06ZqUIDEg56eSCiAgfQp9KTsKCi8vIOWvvOWHuuWwgeijheWQjueahCByZXF1ZXN0IOaooeWdlwpleHBvcnQgZGVmYXVsdCByZXF1ZXN0Ow=="},{"version":3,"names":["axios","router","axiosRetry","baseUrl","process","env","VUE_APP_BASEURL","request","create","baseURL","timeout","whiteUrls","interceptors","use","config","headers","user","sessionStorage","getItem","JSON","parse","id","includes","url","userJson","push","Error","error","Promise","reject","response","res","data","responseType","_error$response","console","message","status","warn","retries","retryCondition","isNetworkOrIdempotentRequestError","retryDelay","retryCount"],"sources":["C:/Users/16278/Desktop/作业/软件开发实训二/javaweb-main/vue/src/utils/request.js"],"sourcesContent":["import axios from \"axios\";\nimport router from \"@/router\";\nimport axiosRetry from \"axios-retry\";\n\nconst baseUrl = process.env.VUE_APP_BASEURL; // 从环境变量中读取基础路径\n\n// 创建 axios 实例\nconst request = axios.create({\n  baseURL: baseUrl, // 设置基础路径\n  timeout: 5000, // 设置请求超时时间\n});\n\n// 动态请求白名单\nconst whiteUrls = [\"/user/login\", \"/user/register\"];\n\n// 注册请求拦截器\nrequest.interceptors.request.use(\n  (config) => {\n    // 设置请求头的 Content-Type\n    config.headers[\"Content-Type\"] = \"application/json;charset=utf-8\";\n\n    // 从 sessionStorage 获取用户信息\n    const user = sessionStorage.getItem(\"user\");\n    config.headers[\"userid\"] = user ? JSON.parse(user).id : 0; // 设置自定义请求头\n\n    // 检查是否在白名单中\n    if (!whiteUrls.includes(config.url)) {\n      // 如果用户未登录，跳转到登录页面\n      const userJson = sessionStorage.getItem(\"user\");\n      if (!userJson) {\n        router.push(\"/login\");\n        throw new Error(\"用户未登录，跳转到登录页面\");\n      }\n    }\n\n    return config;\n  },\n  (error) => {\n    // 请求错误时返回 Promise 拒绝\n    return Promise.reject(error);\n  }\n);\n\n// 注册响应拦截器\nrequest.interceptors.response.use(\n  (response) => {\n    let res = response.data;\n\n    // 处理文件类型响应\n    if (response.config.responseType === \"blob\") {\n      return res;\n    }\n\n    // 如果返回数据是字符串类型，尝试解析为 JSON\n    if (typeof res === \"string\") {\n      res = res ? JSON.parse(res) : res;\n    }\n\n    return res; // 返回最终结果\n  },\n  (error) => {\n    // 捕获错误并处理\n    console.error(\"HTTP 错误:\", error.response?.data?.message || error.message);\n\n    if (error.response) {\n      const { status } = error.response;\n\n      // 如果是 401 未授权，跳转到登录页面\n      if (status === 401) {\n        router.push(\"/login\");\n      }\n\n      // 其他状态码处理\n      if (status >= 400 && status < 500) {\n        console.warn(`客户端错误：${error.response.data.message}`);\n      } else if (status >= 500) {\n        console.error(\"服务器错误，请稍后重试\");\n      }\n    }\n\n    return Promise.reject(error); // 返回 Promise 拒绝\n  }\n);\n\n// 为请求添加失败重试机制\naxiosRetry(request, {\n  retries: 3, // 设置重试次数\n  retryCondition: (error) => {\n    // 仅在网络错误或超时时重试\n    return axiosRetry.isNetworkOrIdempotentRequestError(error);\n  },\n  retryDelay: (retryCount) => {\n    // 重试延迟策略\n    return retryCount * 1000; // 每次重试间隔 1 秒\n  },\n});\n\n// 导出封装后的 request 模块\nexport default request;\n"],"mappings":"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","ignoreList":[]}]}