{"remainingRequest":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\front\\LongComment.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\front\\LongComment.vue","mtime":1735289519396},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\babel.config.js","mtime":1735045997675},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735088236947},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTG9uZ0NvbW1lbnQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbnRpdHk6IHsKICAgICAgICB0aXRsZTogJycKICAgICAgfSwKICAgICAgdXNlcjoge30sCiAgICAgIGlkOiBudWxsCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMudXNlciA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSA/IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKSA6IHt9OwogICAgdGhpcy5pZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkOyAvLyDku47ot6/nlLHlj4LmlbDkuK3ojrflj5YgYGlkYAogIH0sCiAgbWV0aG9kczogewogICAgY2FuY2VsKCkgewogICAgICAvLyDkv67lpI3lj5bmtojpgLvovpHvvIzmraPnoa7kvKDpgJIgYGlkYCDlj4LmlbAKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvZnJvbnQvZGV0YWlsJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgaWQ6IHRoaXMuaWQKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmUoKSB7CiAgICAgIGlmICghdGhpcy51c2VyLnVzZXJuYW1lKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAi6K+355m75b2VIiwKICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZW50aXR5LmNvbnRlbnQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIG1lc3NhZ2U6ICLor7floavlhpnlhoXlrrkiLAogICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8vIOiuvue9ruivhOiuuuWxnuaApwogICAgICB0aGlzLmVudGl0eS51c2VybmFtZSA9IHRoaXMudXNlci51c2VybmFtZTsKICAgICAgdGhpcy5lbnRpdHkudHlwZSA9IDI7CiAgICAgIHRoaXMuZW50aXR5LmZvcmVpZ25JZCA9IHRoaXMuaWQ7IC8vIOWwhuaooeWdlyBJRCDkvZzkuLogYGZvcmVpZ25JZGAKICAgICAgcmVxdWVzdC5wb3N0KCIvbWVzc2FnZSIsIHRoaXMuZW50aXR5KS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMCcpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAi6K+E6K665oiQ5YqfIiwKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiCiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIOi3s+i9rOWbnuivpuaDhemhtemdogogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgICBwYXRoOiAnL2Zyb250L2RldGFpbCcsCiAgICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiByZXMubXNnLAogICAgICAgICAgICB0eXBlOiAiZXJyb3IiCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["request","name","data","entity","title","user","id","created","sessionStorage","getItem","JSON","parse","$route","query","methods","cancel","$router","push","path","save","username","$message","message","type","content","foreignId","post","then","res","code","msg"],"sources":["C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\front\\LongComment.vue"],"sourcesContent":["<template>\n  <el-card style=\"margin-top: 10px\">\n    <el-form>\n      <el-form-item label=\"标题\" label-width=\"50px\">\n        <el-input v-model=\"entity.title\" style=\"width: 50%\"></el-input>\n      </el-form-item>\n    </el-form>\n    <v-md-editor v-model=\"entity.content\" height=\"400px\"></v-md-editor>\n    <div style=\"padding: 10px 0\">\n      <!-- 修复了取消按钮 -->\n      <el-button @click=\"cancel\">取消</el-button>\n      <el-button type=\"primary\" @click=\"save\">发布</el-button>\n    </div>\n  </el-card>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"LongComment\",\n  data() {\n    return {\n      entity: { title: '' },\n      user: {},\n      id: null\n    }\n  },\n  created() {\n    this.user = sessionStorage.getItem(\"user\") ? JSON.parse(sessionStorage.getItem(\"user\")) : {}\n    this.id = this.$route.query.id // 从路由参数中获取 `id`\n  },\n  methods: {\n    cancel() {\n      // 修复取消逻辑，正确传递 `id` 参数\n      this.$router.push({ path: '/front/detail', query: { id: this.id } });\n    },\n    save() {\n      if (!this.user.username) {\n        this.$message({\n          message: \"请登录\",\n          type: \"warning\"\n        });\n        return;\n      }\n      if (!this.entity.content) {\n        this.$message({\n          message: \"请填写内容\",\n          type: \"warning\"\n        });\n        return;\n      }\n      // 设置评论属性\n      this.entity.username = this.user.username;\n      this.entity.type = 2;\n      this.entity.foreignId = this.id; // 将模块 ID 作为 `foreignId`\n      request.post(\"/message\", this.entity).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            message: \"评论成功\",\n            type: \"success\"\n          });\n          // 跳转回详情页面\n          this.$router.push({ path: '/front/detail', query: { id: this.id } });\n        } else {\n          this.$message({\n            message: res.msg,\n            type: \"error\"\n          });\n        }\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>\n"],"mappings":";AAiBA,OAAOA,OAAM,MAAO,iBAAiB;AAErC,eAAe;EACbC,IAAI,EAAE,aAAa;EACnBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE;QAAEC,KAAK,EAAE;MAAG,CAAC;MACrBC,IAAI,EAAE,CAAC,CAAC;MACRC,EAAE,EAAE;IACN;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACF,IAAG,GAAIG,cAAc,CAACC,OAAO,CAAC,MAAM,IAAIC,IAAI,CAACC,KAAK,CAACH,cAAc,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC;IAC3F,IAAI,CAACH,EAAC,GAAI,IAAI,CAACM,MAAM,CAACC,KAAK,CAACP,EAAC,EAAE;EACjC,CAAC;EACDQ,OAAO,EAAE;IACPC,MAAMA,CAAA,EAAG;MACP;MACA,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;QAAEC,IAAI,EAAE,eAAe;QAAEL,KAAK,EAAE;UAAEP,EAAE,EAAE,IAAI,CAACA;QAAG;MAAE,CAAC,CAAC;IACtE,CAAC;IACDa,IAAIA,CAAA,EAAG;MACL,IAAI,CAAC,IAAI,CAACd,IAAI,CAACe,QAAQ,EAAE;QACvB,IAAI,CAACC,QAAQ,CAAC;UACZC,OAAO,EAAE,KAAK;UACdC,IAAI,EAAE;QACR,CAAC,CAAC;QACF;MACF;MACA,IAAI,CAAC,IAAI,CAACpB,MAAM,CAACqB,OAAO,EAAE;QACxB,IAAI,CAACH,QAAQ,CAAC;UACZC,OAAO,EAAE,OAAO;UAChBC,IAAI,EAAE;QACR,CAAC,CAAC;QACF;MACF;MACA;MACA,IAAI,CAACpB,MAAM,CAACiB,QAAO,GAAI,IAAI,CAACf,IAAI,CAACe,QAAQ;MACzC,IAAI,CAACjB,MAAM,CAACoB,IAAG,GAAI,CAAC;MACpB,IAAI,CAACpB,MAAM,CAACsB,SAAQ,GAAI,IAAI,CAACnB,EAAE,EAAE;MACjCN,OAAO,CAAC0B,IAAI,CAAC,UAAU,EAAE,IAAI,CAACvB,MAAM,CAAC,CAACwB,IAAI,CAACC,GAAE,IAAK;QAChD,IAAIA,GAAG,CAACC,IAAG,KAAM,GAAG,EAAE;UACpB,IAAI,CAACR,QAAQ,CAAC;YACZC,OAAO,EAAE,MAAM;YACfC,IAAI,EAAE;UACR,CAAC,CAAC;UACF;UACA,IAAI,CAACP,OAAO,CAACC,IAAI,CAAC;YAAEC,IAAI,EAAE,eAAe;YAAEL,KAAK,EAAE;cAAEP,EAAE,EAAE,IAAI,CAACA;YAAG;UAAE,CAAC,CAAC;QACtE,OAAO;UACL,IAAI,CAACe,QAAQ,CAAC;YACZC,OAAO,EAAEM,GAAG,CAACE,GAAG;YAChBP,IAAI,EAAE;UACR,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ;EACF;AACF","ignoreList":[]}]}