{"remainingRequest":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\front\\CollectedContent.vue?vue&type=style&index=0&id=1ea71860&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\front\\CollectedContent.vue","mtime":1735836310876},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1735088235905},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1735088236031},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1735088235826},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lbC10YWJsZSB7CiAgbWFyZ2luLXRvcDogMTBweDsKfQo="},{"version":3,"sources":["C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\front\\CollectedContent.vue"],"names":[],"mappings":";AA6HA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAClB","file":"C:/Users/16278/Desktop/homework/software_developing2/CommunicationOfcqupt/vue/src/views/front/CollectedContent.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n    <!-- 表格区域 -->\n    <el-table\n      v-loading=\"loading\"\n      :data=\"tableData\"\n      border\n      stripe\n      style=\"width: 100%\"\n    >\n      <el-table-column prop=\"name\" label=\"名称\"></el-table-column>\n      <el-table-column label=\"图片\">\n        <template #default=\"scope\">\n          <el-image\n            style=\"width: 100px; height: 100px\"\n            :src=\"scope.row.img\"\n            :preview-src-list=\"[]\"\n          ></el-image>\n        </template>\n      </el-table-column>\n      \n      <el-table-column label=\"操作\">\n        <template #default=\"scope\">\n          <el-popconfirm\n            title=\"确定删除吗？\"\n            @confirm=\"handleDelete(scope.row.id)\"\n          >\n            <template #reference>\n              <el-button size=\"mini\" type=\"danger\">删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <div style=\"margin: 10px 0; background-color: white\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[5, 10, 20]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nconst url = \"/collectMovie\";\n\nexport default {\n  name: \"CollectMovie\",\n  data() {\n    return {\n      loading: false,\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      tableData: [],\n      user: JSON.parse(sessionStorage.getItem(\"user\") || \"{}\"),\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    load() {\n      this.loading = true;\n      request\n        .get(`${url}/page`, {\n          params: {\n            pageNum: this.pageNum,\n            pageSize: this.pageSize,\n            userId: this.user.id,\n          },\n        })\n        .then((res) => {\n          this.loading = false;\n          if (res.code === \"0\") {\n            this.tableData = res.data.records || [];\n            this.total = res.data.total || 0;\n          } else {\n            this.$message.error(res.msg || \"加载数据失败\");\n          }\n        })\n        .catch(() => {\n          this.loading = false;\n          this.$message.error(\"加载数据失败，请稍后重试\");\n        });\n    },\n\n    handleDelete(id) {\n      request\n        .delete(`${url}/${id}`)\n        .then((res) => {\n          if (res.code === \"0\") {\n            this.$message.success(\"删除成功\");\n            this.load();\n          } else {\n            this.$message.error(res.msg || \"删除失败\");\n          }\n        })\n        .catch(() => {\n          this.$message.error(\"删除失败，请稍后重试\");\n        });\n    },\n\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.el-table {\n  margin-top: 10px;\n}\n</style>"]}]}