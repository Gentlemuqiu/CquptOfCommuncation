{"remainingRequest":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\front\\Detail.vue?vue&type=style&index=0&id=56e5c0b1&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\front\\Detail.vue","mtime":1735223890786},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1735088235905},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1735088236031},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1735088235826},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8qIOe+juWMluWbvueJh+S4juW8ueeql+agt+W8jyAqLwouZWwtaW1hZ2UgewogIHRyYW5zaXRpb246IG9wYWNpdHkgMC4zcywgdHJhbnNmb3JtIDAuM3M7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKfQoKLmVsLWltYWdlOmhvdmVyIHsKICBvcGFjaXR5OiAwLjg7CiAgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsKfQoKLyog5by556qX5qCH6aKY5qC35byPICovCi5lbC1kaWFsb2dfX2hlYWRlciB7CiAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgZm9udC1zaXplOiAxOHB4OwogIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7CiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7CiAgcGFkZGluZzogMTVweDsKICBib3JkZXItcmFkaXVzOiAxMHB4IDEwcHggMCAwOwp9Cg=="},{"version":3,"sources":["C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\front\\Detail.vue"],"names":[],"mappings":";AAkQA,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACxC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AACrB;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACxB;;AAEA,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAC7B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;AAC9B","file":"C:/Users/16278/Desktop/homework/software_developing2/javaweb-main/vue/src/views/front/Detail.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"padding: 5px 0\">\n    <el-row :gutter=\"5\">\n      <el-col :span=\"6\">\n        <el-card>\n          <el-image \n            :src=\"info.img\"\n            @click=\"showVideo\" \n            style=\"cursor: pointer; border-radius: 10px;\"\n          />\n        </el-card>\n      </el-col>\n      <el-col :span=\"18\">\n        <el-card>\n          <div style=\"padding: 10px 0; font-size: 24px; font-weight: bold;\">{{ info.name }}</div>\n          <div style=\"color: #888; font-size: 14px; margin-bottom: 10px;\">发布时间：{{ info.date }}</div>\n          <div style=\"padding: 10px 0\">\n            <div style=\"padding: 5px 0\">类型：<span style=\"color: #888; font-weight: bold;\">{{ info.area }}</span></div>\n            <div style=\"padding: 5px 0; font-size: 16px;\">简介：</div>\n            <div style=\"padding: 10px; background-color: #f7f7f7; border-radius: 6px; color: #666; text-indent: 2em;\">{{ info.description }}</div>\n            <div style=\"text-align: right; padding: 15px 0\">\n              <div>\n                <el-input\n                  v-model=\"complaintText\"\n                  placeholder=\"请输入投诉内容\"\n                  style=\"margin-left: 10px; width: 200px; display: inline-block;\"\n                ></el-input>\n                <el-button\n                  type=\"major\"\n                  style=\"background-color: orangered; color: white; margin-left: 10px\"\n                  @click=\"tousu(complaintText)\"\n                >\n                  提交投诉\n                </el-button>\n              </div>\n              <el-button \n                style=\"background-color: dodgerblue; color: white; margin: 5px;\" \n                @click=\"collectMovie\"\n              >\n                收藏\n              </el-button>\n              <el-button \n                style=\"background-color: #008cff; color: white; margin: 5px;\" \n                @click=\"zan\"\n              >\n                赞 {{ info.zan }}\n              </el-button>\n              <el-button \n                type=\"info\" \n                style=\"margin: 5px;\" \n                @click=\"cai\"\n              >\n                踩 {{ info.cai }}\n              </el-button>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n\n      <!-- 视频播放弹窗 -->\n      <el-dialog \n        :title=\"info.name || '视频播放'\" \n        v-model=\"videoDialogVisible\" \n        width=\"70%\" \n        :before-close=\"handleCloseVideo\"\n      >\n        <video \n          v-if=\"info.url\" \n          :src=\"info.url\" \n          controls \n          autoplay\n          style=\"width: 100%; border-radius: 10px;\"\n        >\n          您的浏览器不支持视频播放\n        </video>\n        <span v-else>暂无视频资源</span>\n      </el-dialog>\n    </el-row>\n\n    <div style=\"margin-top: 10px; margin-bottom: 80px\">\n      <el-card>\n        <div style=\"padding: 20px;\">\n          <el-button \n            type=\"primary\" \n            style=\"margin-bottom: 20px\" \n            @click=\"$router.push({path: '/front/longComment', query: {id: info.id}})\"\n          >\n            发表长评\n          </el-button>\n          <div style=\"padding: 10px 0; font-size: 20px; border-bottom: 1px solid #ccc; margin-bottom: 20px;\">精彩长评列表</div>\n          <div \n            style=\"border-bottom: 1px dashed #ccc; padding: 10px 20px; color: #666;\" \n            v-for=\"item in longMessages\" \n            :key=\"item.id\"\n          >\n            <span \n              class=\"longComment\" \n              style=\"font-size: 20px; cursor: pointer;\" \n              @click=\"showLongComment(item.content)\"\n            >\n              {{ item.title }}\n            </span>\n            <span style=\"font-size: 12px; margin-left: 20px;\">{{ item.username }}</span>\n            <span style=\"font-size: 12px; margin-left: 20px;\">{{ item.time }}</span>\n            <el-button \n              type=\"major\" \n              style=\"background-color: orangered; color: white; margin-left: 10px;\" \n              @click=\"jubao(item)\"\n            >\n              投诉\n            </el-button>\n            <el-button \n              type=\"text\" \n              style=\"float: right; margin-left: 10px;\" \n              @click=\"del(item.id)\" \n              v-if=\"item.username === user.username\"\n            >\n              删除\n            </el-button>\n          </div>\n        </div>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"Detail\",\n  data() {\n    return {\n      videoDialogVisible: false, // 控制视频弹窗的显示\n      complaintText: '', // 存储投诉输入框的值\n      info: {}, // 电影详情\n      longMessages: [], // 长评列表\n      user: {}, // 当前用户信息\n      zanFlag: false, // 防止重复点赞\n      caiFlag: false // 防止重复踩\n    };\n  },\n  created() {\n    this.user = sessionStorage.getItem(\"user\") ? JSON.parse(sessionStorage.getItem(\"user\")) : {};\n    this.load();\n  },\n  methods: {\n    // 显示视频弹窗\n    showVideo() {\n      if (this.info.url) {\n        this.videoDialogVisible = true;\n      } else {\n        this.$message({\n          message: \"暂无视频资源\",\n          type: \"warning\"\n        });\n      }\n    },\n    // 视频弹窗关闭处理\n    handleCloseVideo(done) {\n      const videoElement = document.querySelector('video');\n      if (videoElement) {\n        videoElement.pause(); // 暂停视频\n      }\n      done();\n    },\n    // 加载电影详情\n    load() {\n      const id = location.search.split(\"=\")[1];\n      request.get(`/movie/${id}`).then(res => {\n        if (res.code === '0') {\n          this.info = res.data;\n        }\n      });\n    },\n    // 收藏电影\n    collectMovie() {\n      request.post(\"/collectMovie/\", {\n        name: this.info.name,\n        img: this.info.img,\n        link: '/front/detail?id=' + this.info.id,\n        userid: this.user.id,\n        movieid: this.info.id\n      }).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            message: \"收藏成功\",\n            type: \"success\"\n          });\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    // 点赞\n    zan() {\n      if (this.zanFlag) {\n        this.$message({\n          message: \"请勿重复点赞\",\n          type: \"warning\"\n        });\n        return;\n      }\n      this.info.zan += 1;\n      this.zanFlag = true;\n      this.updateMovieInfo();\n    },\n    // 点踩\n    cai() {\n      if (this.caiFlag) {\n        this.$message({\n          message: \"请勿重复踩\",\n          type: \"warning\"\n        });\n        return;\n      }\n      this.info.cai += 1;\n      this.caiFlag = true;\n      this.updateMovieInfo();\n    },\n    // 更新电影信息\n    updateMovieInfo() {\n      request.put(\"/movie\", this.info).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            message: \"操作成功\",\n            type: \"success\"\n          });\n        }\n      });\n    },\n    // 提交投诉\n    tousu(content) {\n      if (!this.user.id) {\n        this.$message({\n          message: \"请登录！\",\n          type: \"warning\"\n        });\n        return;\n      }\n      request.post(\"/jubao\", {\n        commentId: this.user.id,\n        commentUser: this.user.username,\n        content: content\n      }).then(res => {\n        if (res.code === '0') {\n          this.$message({\n            message: \"投诉成功\",\n            type: \"success\"\n          });\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style scoped>\n/* 美化图片与弹窗样式 */\n.el-image {\n  transition: opacity 0.3s, transform 0.3s;\n  border-radius: 10px;\n}\n\n.el-image:hover {\n  opacity: 0.8;\n  transform: scale(1.05);\n}\n\n/* 弹窗标题样式 */\n.el-dialog__header {\n  font-weight: bold;\n  font-size: 18px;\n  background-color: #f5f5f5;\n  border-bottom: 1px solid #ddd;\n  padding: 15px;\n  border-radius: 10px 10px 0 0;\n}\n</style>\n"]}]}