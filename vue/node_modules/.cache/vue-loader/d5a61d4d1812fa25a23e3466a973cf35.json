{"remainingRequest":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\Comment.vue?vue&type=style&index=0&id=0b60fd95&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\Comment.vue","mtime":1735288146384},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1735088235905},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1735088236031},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1735088235826},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5kaWFsb2ctZm9vdGVyIHsKICB0ZXh0LWFsaWduOiByaWdodDsKfQo="},{"version":3,"sources":["C:\\Users\\16278\\Desktop\\homework\\software_developing2\\javaweb-main\\vue\\src\\views\\Comment.vue"],"names":[],"mappings":";AA+JA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB","file":"C:/Users/16278/Desktop/homework/software_developing2/javaweb-main/vue/src/views/Comment.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n    <!-- 搜索区域 -->\n    <div style=\"margin: 10px 0\">\n      <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%\" clearable></el-input>\n      <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\">查询</el-button>\n    </div>\n\n    <!-- 数据表格 -->\n    <el-table\n      v-loading=\"loading\"\n      :data=\"tableData\"\n      border\n      stripe\n      style=\"width: 100%\">\n      <el-table-column prop=\"title\" label=\"标题\"></el-table-column>\n      <el-table-column label=\"内容\">\n        <template #default=\"scope\">\n          <div style=\"text-overflow:ellipsis; width:100%;\">\n            {{ scope.row.content.length > 100 ? scope.row.content.substring(0, 100) + '...' : scope.row.content }}\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"username\" label=\"评论人\"></el-table-column>\n      <el-table-column prop=\"time\" label=\"评论时间\"></el-table-column>\n      <el-table-column label=\"操作\">\n        <template #default=\"scope\">\n          <el-popconfirm title=\"确定删除吗？\" @confirm=\"handleDelete(scope.row.id)\">\n            <template #reference>\n              <el-button size=\"mini\" type=\"danger\">删除</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页 -->\n    <div style=\"margin: 10px 0\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"pageNum\"\n        :page-sizes=\"[5, 10, 20]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"total\">\n      </el-pagination>\n    </div>\n\n    <!-- 弹窗 -->\n    <el-dialog title=\"信息\" v-model=\"dialogVisible\" width=\"30%\">\n      <el-form :model=\"entity\" label-width=\"120px\">\n        <el-form-item label=\"内容\">\n          <el-input v-model=\"entity.content\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"评论人\">\n          <el-input v-model=\"entity.username\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"评论时间\">\n          <el-date-picker\n            style=\"width: 80%\"\n            v-model=\"entity.time\"\n            type=\"datetime\"\n            value-format=\"YYYY-MM-DD HH:mm:ss\"\n            placeholder=\"选择日期时间\">\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item label=\"标题\">\n          <el-input v-model=\"entity.title\" autocomplete=\"off\" style=\"width: 80%\"></el-input>\n        </el-form-item>\n      </el-form>\n      <template #footer>\n        <span class=\"dialog-footer\">\n          <el-button @click=\"dialogVisible = false\">取消</el-button>\n          <el-button type=\"primary\" @click=\"save\">确定</el-button>\n        </span>\n      </template>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\nlet url = \"/message\";\n\nexport default {\n  name: \"Message\",\n  data() {\n    return {\n      loading: true,\n      entity: {}, // 弹窗绑定数据\n      dialogVisible: false,\n      search: \"\",\n      pageNum: 1,\n      pageSize: 10,\n      total: 0,\n      tableData: []\n    };\n  },\n  created() {\n    this.load();\n  },\n  methods: {\n    // 加载数据\n    load() {\n      this.loading = true;\n      request\n        .get(url + \"/page\", {\n          params: {\n            pageNum: this.pageNum,\n            pageSize: this.pageSize,\n            search: this.search\n          }\n        })\n        .then(res => {\n          this.loading = false;\n          this.tableData = res.data.records;\n          this.total = res.data.total;\n        });\n    },\n    // 保存数据\n    save() {\n      const method = this.entity.id ? \"put\" : \"post\"; // 根据是否有id判断新增或更新\n      request[method](url, this.entity).then(res => {\n        if (res.code === \"0\") {\n          this.$message.success(`${this.entity.id ? \"更新\" : \"新增\"}成功`);\n          this.load(); // 刷新数据\n          this.dialogVisible = false; // 关闭弹窗\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    // 删除数据\n    handleDelete(id) {\n      request.delete(`${url}/${id}`).then(res => {\n        if (res.code === \"0\") {\n          this.$message.success(\"删除成功\");\n          this.load(); // 刷新数据\n        } else {\n          this.$message.error(res.msg);\n        }\n      });\n    },\n    // 分页：改变每页条数\n    handleSizeChange(pageSize) {\n      this.pageSize = pageSize;\n      this.load();\n    },\n    // 分页：改变当前页\n    handleCurrentChange(pageNum) {\n      this.pageNum = pageNum;\n      this.load();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.dialog-footer {\n  text-align: right;\n}\n</style>\n"]}]}