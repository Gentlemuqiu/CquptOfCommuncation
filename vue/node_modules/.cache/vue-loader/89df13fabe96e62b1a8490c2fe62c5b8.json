{"remainingRequest":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\layout\\Front.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\layout\\Front.vue","mtime":1735834407106},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1735088236947},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJlcXVlc3QgZnJvbSAiQC91dGlscy9yZXF1ZXN0IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiTGF5b3V0IiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjoge30sCiAgICAgIG5hbWU6ICcnLAogICAgICBjb3VudDogMSwKICAgICAgbm90aWNlOiBbXSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGFjdGl2ZTogJzAnCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pbml0VXNlckluZm8oKTsKICAgIHRoaXMuaW5pdE5vdGljZSgpOwogICAgLy8g5re75Yqg5LqL5Lu255uR5ZCs5ZmoCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuaGFuZGxlU3RvcmFnZUNoYW5nZSk7CiAgICAvLyDmt7vliqDoh6rlrprkuYnkuovku7bnm5HlkKzlmagKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd1c2VyVXBkYXRlJywgdGhpcy5oYW5kbGVVc2VyVXBkYXRlKTsKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIC8vIOa4heeQhuS6i+S7tuebkeWQrOWZqAogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmhhbmRsZVN0b3JhZ2VDaGFuZ2UpOwogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3VzZXJVcGRhdGUnLCB0aGlzLmhhbmRsZVVzZXJVcGRhdGUpOwogIH0sCiAgbWV0aG9kczogewogICAgaW5pdFVzZXJJbmZvKCkgewogICAgICBsZXQgc3RyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpIHx8ICJ7fSI7CiAgICAgIHRoaXMudXNlciA9IEpTT04ucGFyc2Uoc3RyKTsKICAgIH0sCiAgICBpbml0Tm90aWNlKCkgewogICAgICByZXF1ZXN0LmdldCgnL25vdGljZScpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLm5vdGljZSA9IHJlcy5kYXRhLmZpbHRlcih2ID0+IHYuc3RhdHVzID09PSAn5bey5Y+R5biDJyk7CiAgICAgICAgdGhpcy5jb3VudCA9IHRoaXMubm90aWNlLmxlbmd0aDsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU3RvcmFnZUNoYW5nZShlKSB7CiAgICAgIGlmIChlLmtleSA9PT0gJ3VzZXInKSB7CiAgICAgICAgdGhpcy5pbml0VXNlckluZm8oKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVVzZXJVcGRhdGUoZSkgewogICAgICAvLyDlpITnkIboh6rlrprkuYnkuovku7YKICAgICAgdGhpcy5pbml0VXNlckluZm8oKTsKICAgIH0sCiAgICBzaG93Tm90aWNlKCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvZnJvbnQvc2VhcmNoJywKICAgICAgICBxdWVyeTogewogICAgICAgICAgbmFtZTogdGhpcy5uYW1lLnRyaW0oKQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlQXZhdGFyRXJyb3IoZSkgewogICAgICBlLnRhcmdldC5zcmMgPSB0aGlzLmRlZmF1bHRBdmF0YXI7CiAgICB9LAogICAgaGFuZGxlQ2xvc2UoZG9uZSkgewogICAgICBkb25lKCk7CiAgICB9CiAgfSwKICAvLyDmt7vliqB3YXRjaOadpeebkeWQrHNlc3Npb25TdG9yYWdl55qE5Y+Y5YyWCiAgd2F0Y2g6IHsKICAgICckcm91dGUnOiB7CiAgICAgIGhhbmRsZXIoKSB7CiAgICAgICAgdGhpcy5pbml0VXNlckluZm8oKTsKICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\layout\\Front.vue"],"names":[],"mappings":"AAmGA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;AAErC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACb,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACd,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACL,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACL,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACR,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACR,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;MACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IACZ;EACF,CAAC;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5D,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC9D,CAAC;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACV,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACjE,CAAC;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACb,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;MAChD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7B,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;QACjC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACjC,CAAC,CAAC;IACJ,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACrB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACpB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrB;IACF,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MAClB,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAChB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACrB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;UACL,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvB;MACF,CAAC,CAAC;IACJ,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnC,CAAC;IACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACR;EACF,CAAC;EACD,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7B,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;MACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;QACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrB,CAAC;MACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAChB;EACF;AACF","file":"C:/Users/16278/Desktop/homework/software_developing2/CommunicationOfcqupt/vue/src/layout/Front.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"background-color: #eee; min-height: 100vh\">\n    <div style=\"height: 50px; line-height: 50px; border-bottom: 1px solid #ccc; display: flex; background-color: #fff\">\n      <div style=\"height: 50px; line-height: 50px; border-bottom: 1px solid #ccc; display: flex; background-color: #fff\">\n        <img src=\"../assets/image/cqupt.svg\" alt=\"Logo\" style=\"width: 40px; height: 40px; margin-top: 5px;\">\n        <div style=\"color:#1D6849; font-weight: bold; font-size: 25px; cursor: pointer\" @click=\"$router.push('/front/home')\">CQUPT交流论坛</div>\n      </div>\n\n      <div style=\"width: 300px\">\n        <ul class=\"menu-box\">\n          <li :class=\"{'active': $route.path === '/front/home'}\" @click=\"$router.push('/front/home')\">首页</li>\n        </ul>\n      </div>\n\n      <div style=\"flex: 1\">\n        <el-input \n          style=\"width: 300px; margin-left: 100px\" \n          v-model=\"name\" \n          clearable \n          placeholder=\"请输入搜索内容\"\n          @keyup.enter=\"search\" \n        />\n        <el-button style=\"margin-left: 5px\" type=\"primary\" @click=\"search\">搜索</el-button>\n      </div>\n\n      <div style=\"width: 130px; display: flex; align-items: center; justify-content: flex-end;\">\n        <span @click=\"showNotice\" style=\"margin-right: 10px; color: orangered; cursor: pointer; display: flex; align-items: center;\">\n          <i class=\"el-icon-bell\" style=\"font-size:18px; margin-right: 5px;\"></i> {{ count }}\n        </span>\n        <el-button \n          v-if=\"!user.id\" \n          @click=\"$router.push('/login')\"\n          type=\"primary\"\n          size=\"small\"\n        >登录</el-button>\n\n        <!-- 已登录状态 -->\n        <el-dropdown v-else trigger=\"click\">\n          <div class=\"user-info\">\n            <el-avatar \n              :size=\"32\"\n              :src=\"user.avatar || defaultAvatar\"\n              @error=\"handleAvatarError\"\n            >\n              {{ user.nickName ? user.nickName[0].toUpperCase() : 'U' }}\n            </el-avatar>\n            <i class=\"el-icon-arrow-down el-icon--right\"></i>\n          </div>\n\n          <template #dropdown>\n            <el-dropdown-menu>\n              <el-dropdown-item @click=\"$router.push('/sayings')\" v-if=\"user.role === 1\">\n                <i class=\"el-icon-setting\"></i> 后台管理\n              </el-dropdown-item>\n              <el-dropdown-item @click=\"$router.push('/front/littleSaying')\" v-if=\"user.role === 2\">\n                <i class=\"el-icon-setting\"></i> 新增帖子\n              </el-dropdown-item>\n              <el-dropdown-item @click=\"$router.push('/front/person')\">\n                <i class=\"el-icon-user\"></i> 个人信息\n              </el-dropdown-item>\n              <el-dropdown-item @click=\"$router.push('/front/collect')\">\n                <i class=\"el-icon-star-off\"></i> 我收藏的评论\n              </el-dropdown-item>\n              <el-dropdown-item @click=\"$router.push('/front/collectedContent')\">\n                <i class=\"el-icon-collection\"></i> 我收藏的内容\n              </el-dropdown-item>\n              <el-dropdown-item @click=\"$router.push('/front/subscribePerson')\">\n                <i class=\"el-icon-coordinate\"></i> 我关注的人\n              </el-dropdown-item>\n              <el-dropdown-item divided @click=\"$router.push('/login')\">\n                <i class=\"el-icon-switch-button\"></i> 退出论坛\n              </el-dropdown-item>\n            </el-dropdown-menu>\n          </template>\n        </el-dropdown>\n      </div>\n    </div>\n\n    <el-row>\n      <el-col :span=\"18\" :offset=\"3\">\n        <router-view />\n      </el-col>\n    </el-row>\n\n    <!-- 公告弹框 -->\n    <el-dialog title=\"公告\" v-model=\"dialogVisible\" width=\"40%\">\n      <div style=\"padding: 0 20px\">\n        <el-collapse v-model=\"active\">\n          <el-collapse-item :title=\"item.name\" :name=\"index+''\" v-for=\"(item, index) in notice\" :key=\"item.id\">\n            <div style=\"font-size: 12px; color: #888\">\n              {{ item.content }}\n            </div>\n          </el-collapse-item>\n        </el-collapse>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>import request from \"@/utils/request\";\n\nexport default {\n  name: \"Layout\",\n  data() {\n    return {\n      user: {},\n      name: '',\n      count: 1,\n      notice: [],\n      dialogVisible: false,\n      active: '0'\n    }\n  },\n  created() {\n    this.initUserInfo();\n    this.initNotice();\n    // 添加事件监听器\n    window.addEventListener('storage', this.handleStorageChange);\n    // 添加自定义事件监听器\n    window.addEventListener('userUpdate', this.handleUserUpdate);\n  },\n  destroyed() {\n    // 清理事件监听器\n    window.removeEventListener('storage', this.handleStorageChange);\n    window.removeEventListener('userUpdate', this.handleUserUpdate);\n  },\n  methods: {\n    initUserInfo() {\n      let str = sessionStorage.getItem(\"user\") || \"{}\";\n      this.user = JSON.parse(str);\n    },\n    initNotice() {\n      request.get('/notice').then(res => {\n        this.notice = res.data.filter(v => v.status === '已发布');\n        this.count = this.notice.length;\n      });\n    },\n    handleStorageChange(e) {\n      if (e.key === 'user') {\n        this.initUserInfo();\n      }\n    },\n    handleUserUpdate(e) {\n      // 处理自定义事件\n      this.initUserInfo();\n    },\n    showNotice() {\n      this.dialogVisible = true;\n    },\n    search() {\n      this.$router.push({\n        path: '/front/search',\n        query: {\n          name: this.name.trim()\n        }\n      });\n    },\n    handleAvatarError(e) {\n      e.target.src = this.defaultAvatar;\n    },\n    handleClose(done) {\n      done();\n    }\n  },\n  // 添加watch来监听sessionStorage的变化\n  watch: {\n    '$route': {\n      handler() {\n        this.initUserInfo();\n      },\n      immediate: true\n    }\n  }\n}\n</script>\n\n<style scoped>\n.menu-box {\n  list-style: none;\n  display: flex;\n  margin-left: 70px;\n}\n.menu-box li {\n  padding: 0 20px;\n  text-align: center;\n  cursor: pointer;\n  color: #666;\n}\n.menu-box li:hover {\n  color: dodgerblue;\n}\n.active {\n  background-color: dodgerblue;\n  color: white !important;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  padding: 0 5px;\n  border-radius: 15px;\n  transition: all 0.3s;\n}\n\n.user-info:hover {\n  background-color: #f5f7fa;\n}\n\n.el-dropdown-menu__item i {\n  margin-right: 8px;\n}\n\n:deep(.el-badge__content) {\n  background-color: #F56C6C;\n}\n\n:deep(.el-avatar) {\n  background-color: #409EFF;\n  color: #fff;\n}\n\n.notice-icon {\n  display: flex;\n  align-items: center;\n  margin-right: 10px;\n  font-size: 18px;\n  color: #F56C6C;\n  cursor: pointer;\n}\n</style>\n"]}]}