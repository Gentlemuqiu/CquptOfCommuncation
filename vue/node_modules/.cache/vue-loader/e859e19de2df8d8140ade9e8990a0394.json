{"remainingRequest":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\front\\Collect.vue?vue&type=style&index=0&id=711ab17a&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\front\\Collect.vue","mtime":1735295802031},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":1735088235905},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1735088236031},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1735088235826},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1735088236894},{"path":"C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1735088235833}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lbC10YWJsZSB7CiAgbWFyZ2luLXRvcDogMTBweDsKfQo="},{"version":3,"sources":["C:\\Users\\16278\\Desktop\\homework\\software_developing2\\CommunicationOfcqupt\\vue\\src\\views\\front\\Collect.vue"],"names":[],"mappings":";AAyFA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACR,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAClB","file":"C:/Users/16278/Desktop/homework/software_developing2/CommunicationOfcqupt/vue/src/views/front/Collect.vue","sourceRoot":"","sourcesContent":["<template>\n  <div style=\"padding: 10px\">\n    <!-- 数据表格 -->\n    <el-table :data=\"tableData\" border stripe>\n      <el-table-column prop=\"name\" label=\"贴子\"></el-table-column>\n      <el-table-column label=\"评论内容\" width=\"120\" align=\"center\">\n        <template #default=\"scope\">\n          <el-button type=\"primary\" size=\"small\" @click=\"show(scope.row.content)\">查看</el-button>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"time\" label=\"收藏时间\"></el-table-column>\n      <el-table-column label=\"操作\" width=\"120\" align=\"center\">\n        <template #default=\"scope\">\n          <el-popconfirm\n            title=\"确定要取消收藏这个帖子吗？\"\n            @confirm=\"handleDelete(scope.row.id)\"\n          >\n            <template #reference>\n              <el-button type=\"danger\" size=\"small\">取消收藏</el-button>\n            </template>\n          </el-popconfirm>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog title=\"长评\" v-model=\"vis\" width=\"40%\">\n      <el-card>\n        <v-md-preview :text=\"longComment\"></v-md-preview>\n      </el-card>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport request from \"@/utils/request\";\n\nexport default {\n  name: \"Collect\",\n  data() {\n    return {\n      tableData: [], // 收藏数据\n      longComment: \"\", // 长评论内容\n      vis: false, // 弹窗可见性\n      user: JSON.parse(sessionStorage.getItem(\"user\") || \"{}\"), // 当前用户信息\n    };\n  },\n  created() {\n    this.load(); // 初始化加载数据\n  },\n  methods: {\n    // 加载收藏数据\n    load() {\n      request.get(`/collect/user/${this.user.id}`).then((res) => {\n        if (res.code === \"0\") {\n          this.tableData = res.data; // 加载表格数据\n        } else {\n          this.$message.error(res.msg || \"加载失败\");\n        }\n      });\n    },\n    // 显示长评论内容\n    show(content) {\n      this.longComment = content;\n      this.vis = true;\n    },\n    // 删除收藏\n    handleDelete(id) {\n      request\n        .delete(`/collect/${id}`) // 调用后端的删除接口\n        .then((res) => {\n          if (res.code === \"0\") {\n            this.$message({\n              type: \"success\",\n              message: \"取消收藏成功\",\n            });\n            this.load(); // 刷新表格数据\n          } else {\n            this.$message.error(res.msg || \"取消收藏失败\");\n          }\n        })\n        .catch(() => {\n          this.$message.error(\"取消收藏失败，请稍后重试\");\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.el-table {\n  margin-top: 10px;\n}\n</style>\n"]}]}